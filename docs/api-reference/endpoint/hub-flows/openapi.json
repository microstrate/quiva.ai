{
    "openapi": "3.0.0",
    "info": {
        "title": "Qiva Hub API",
        "x-gateway-name": "API Gateway",
        "description": "API for managing collections, nodes, agents, and workflows in quiva.ai Hub",
        "version": "0.1.0",
        "contact": {
            "name": "quiva.ai Support"
        }
    },
    "servers": [
        {
            "url": "https://api.quiva.ai",
            "description": "Production API server"
        }
    ],
    "paths": {
        "/hub/marketplace/workflows": {
            "get": {
                "tags": [
                    "Marketplace"
                ],
                "summary": "List marketplace workflows",
                "description": "Retrieves workflows available in the marketplace with filtering options",
                "operationId": "listMarketplaceFlows",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.list-marketplace-flows",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        },
                        "description": "Page number"
                    },
                    {
                        "name": "page_size",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "Number of items per page"
                    },
                    {
                        "name": "featured",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        },
                        "description": "Filter for featured products only"
                    },
                    {
                        "name": "mcp",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        },
                        "description": "Include MCP products"
                    },
                    {
                        "name": "flow",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        },
                        "description": "Include flow products"
                    },
                    {
                        "name": "agent",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        },
                        "description": "Include agent products"
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Search term (minimum 3 characters)"
                    },
                    {
                        "name": "subcategories",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Comma-separated subcategories to filter by"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Marketplace workflows retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/MarketplaceWorkflowList"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/marketplace/submissions": {
            "get": {
                "tags": [
                    "Marketplace"
                ],
                "summary": "List marketplace submissions",
                "description": "Lists marketplace submissions for the authenticated user",
                "operationId": "listMarketplaceSubmissions",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.list-marketplace-submissions",
                "responses": {
                    "200": {
                        "description": "Submissions retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "results": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/WorkflowMarketplaceSubmission"
                                            }
                                        },
                                        "results_total": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Marketplace"
                ],
                "summary": "Create marketplace submission",
                "description": "Submits a workflow to the marketplace for review",
                "operationId": "createMarketplaceSubmission",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.post.create-marketplace-submission",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WorkflowMarketplaceSubmission"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Submission created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/marketplace/submissions/{topic}": {
            "parameters": [
                {
                    "name": "topic",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    },
                    "description": "Submission topic"
                }
            ],
            "get": {
                "tags": [
                    "Marketplace"
                ],
                "summary": "Get marketplace submission",
                "description": "Retrieves a specific marketplace submission",
                "operationId": "getMarketplaceSubmission",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.get-marketplace-submission",
                "responses": {
                    "200": {
                        "description": "Submission retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/WorkflowMarketplaceSubmission"
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "Marketplace"
                ],
                "summary": "Update marketplace submission",
                "description": "Updates an existing marketplace submission",
                "operationId": "updateMarketplaceSubmission",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.patch.update-marketplace-submission",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WorkflowMarketplaceSubmission"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Submission updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Marketplace"
                ],
                "summary": "Delete marketplace submission",
                "description": "Submits a deletion request for a marketplace submission",
                "operationId": "deleteMarketplaceSubmission",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.delete.delete-marketplace-submission",
                "responses": {
                    "200": {
                        "description": "Deletion request submitted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/marketplace/workflows/buy": {
            "post": {
                "tags": [
                    "Marketplace"
                ],
                "summary": "Obtain marketplace product",
                "description": "Copies all resources associated with a marketplace workflow to user's account",
                "operationId": "obtainMarketplaceProduct",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.post.obtain-marketplace-product",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "product_id"
                                ],
                                "properties": {
                                    "product_id": {
                                        "type": "string",
                                        "description": "Marketplace product identifier"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Product obtained successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/marketplace/workflows/download": {
            "post": {
                "tags": [
                    "Marketplace"
                ],
                "summary": "Download marketplace product",
                "description": "Downloads a marketplace product to a specific collection",
                "operationId": "downloadMarketplaceProduct",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.post.download-marketplace-product",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/DownloadProductType"
                            },
                            "example": {
                                "product_id": "marketplace.flow.payment-processor",
                                "collection_subject": "ms.hub.config.collection.workflow.1234567890",
                                "secrets": [
                                    {
                                        "key": "STRIPE_API_KEY",
                                        "name": "Stripe API Key",
                                        "description": "Your Stripe secret key",
                                        "new_key": "MY_STRIPE_KEY"
                                    }
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Product downloaded successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "status_code": {
                                            "type": "integer"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/marketplace/download-stats": {
            "get": {
                "tags": [
                    "Marketplace"
                ],
                "summary": "Marketplace product download stats",
                "description": "Returns download statistics for marketplace products",
                "operationId": "getMarketplaceProductDownloadStats",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.marketplace-product-download-stats",
                "parameters": [
                    {
                        "name": "product_id",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "Product identifier"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Download statistics retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "total_downloads": {
                                            "type": "integer"
                                        },
                                        "users_downloaded": {
                                            "type": "integer"
                                        },
                                        "rating": {
                                            "type": "number"
                                        },
                                        "votes": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/marketplace/product": {
            "get": {
                "tags": [
                    "Marketplace"
                ],
                "summary": "Get marketplace product",
                "description": "Retrieves a specific marketplace product by ID",
                "operationId": "getMarketplaceProduct",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.marketplace-product",
                "parameters": [
                    {
                        "name": "product_id",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "Product identifier"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Product retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/MarketplaceProduct"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/marketplace/rate-product": {
            "post": {
                "tags": [
                    "Marketplace"
                ],
                "summary": "Rate marketplace product",
                "description": "Submits a rating (1-5) for a marketplace product",
                "operationId": "rateMarketplaceProduct",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.post.marketplace-rate-product",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RateProductRequest"
                            },
                            "example": {
                                "product_id": "marketplace.flow.payment-processor",
                                "rating": 5
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Rating submitted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/agent-sessions/search": {
            "post": {
                "description": "Queries agent session logs and execution history",
                "operationId": "searchAgentSessions",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "agent_name": {
                                        "type": "string"
                                    },
                                    "end_time": {
                                        "format": "date-time",
                                        "type": "string"
                                    },
                                    "session_id": {
                                        "type": "string"
                                    },
                                    "start_time": {
                                        "format": "date-time",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "results": {
                                            "items": {
                                                "type": "object"
                                            },
                                            "type": "array"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        },
                        "description": "Agent sessions retrieved successfully"
                    }
                },
                "summary": "Search agent session logs",
                "tags": [
                    "Logs"
                ],
                "x-resource": "microstrate.hub.post.search-agent-sessions",
                "x-resource-type": "service"
            }
        },
        "/hub/agent/cancel": {
            "post": {
                "description": "Cancels one or more agents that were registered with the cancel_token",
                "operationId": "cancelAgents",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "example": {
                                "cancel_token": "my-session-token-123"
                            },
                            "schema": {
                                "$ref": "#/components/schemas/AgentCancelRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CancelResponse"
                                }
                            }
                        },
                        "description": "Agents cancelled successfully"
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        },
                        "description": "Bad request"
                    }
                },
                "summary": "Cancel agents",
                "tags": [
                    "Agents"
                ],
                "x-resource": "microstrate.hub.post.cancel-agents",
                "x-resource-type": "service"
            }
        },
        "/hub/agent/invoke": {
            "post": {
                "description": "Invokes an AI agent with specified configuration and prompt",
                "operationId": "invokeAgent",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "examples": {
                                "withAgentDefinition": {
                                    "summary": "Invoke agent with inline definition",
                                    "value": {
                                        "agent": {
                                            "behaviour": "You are a data analysis expert",
                                            "description": "Analyzes data patterns",
                                            "has_tools": false,
                                            "llm_provider": "claude",
                                            "model": "claude-3-haiku-20240307",
                                            "name": "data-analyzer",
                                            "timeout": 60000
                                        },
                                        "prompt": "Analyze sales trends",
                                        "visibility": "team"
                                    }
                                },
                                "withNodeSubject": {
                                    "summary": "Invoke agent by node subject",
                                    "value": {
                                        "node_subject": "ms.hub.config.node.805092869.agent123",
                                        "prompt": "Analyze this data",
                                        "session_id": "session_abc123",
                                        "visibility": "user"
                                    }
                                }
                            },
                            "schema": {
                                "$ref": "#/components/schemas/AgentNodeInvokeRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AgentInvokeResponse"
                                }
                            }
                        },
                        "description": "Agent invoked successfully"
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        },
                        "description": "Bad request"
                    }
                },
                "summary": "Invoke an AI agent",
                "tags": [
                    "Agents"
                ],
                "x-resource": "microstrate.hub.post.invoke-agent",
                "x-resource-type": "service"
            }
        },
        "/hub/agent/mcp": {
            "get": {
                "description": "Retrieves a list of MCP (Model Context Protocol) servers",
                "operationId": "listMcpServers",
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ListMCPResponse"
                                }
                            }
                        },
                        "description": "MCP servers retrieved successfully"
                    }
                },
                "summary": "List MCP servers",
                "tags": [
                    "MCP"
                ],
                "x-resource": "microstrate.hub.get.list-mcp-servers",
                "x-resource-type": "service"
            },
            "post": {
                "description": "Generates a new MCP server from an OpenAPI specification",
                "operationId": "generateMcpServer",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "example": {
                                "description": "API for managing resources",
                                "openapi_spec": "{\"openapi\":\"3.0.0\",\"info\":{\"title\":\"My API\"},...}",
                                "server_name": "my-api-server"
                            },
                            "schema": {
                                "$ref": "#/components/schemas/GenerateMCPRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GenerateMCPResponse"
                                }
                            }
                        },
                        "description": "MCP server generated successfully"
                    }
                },
                "summary": "Generate MCP server",
                "tags": [
                    "MCP"
                ],
                "x-resource": "microstrate.hub.post.generate-mcp-server",
                "x-resource-type": "service"
            }
        },
        "/hub/agent/mcp/{server_id}": {
            "delete": {
                "description": "Deletes an MCP server",
                "operationId": "deleteMcpServer",
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DeleteMCPResponse"
                                }
                            }
                        },
                        "description": "MCP server deleted successfully"
                    }
                },
                "summary": "Delete MCP server",
                "tags": [
                    "MCP"
                ],
                "x-resource": "microstrate.hub.delete.delete-mcp-server",
                "x-resource-type": "service"
            },
            "parameters": [
                {
                    "description": "MCP server identifier",
                    "in": "path",
                    "name": "server_id",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }
            ],
            "patch": {
                "description": "Updates an existing MCP server configuration",
                "operationId": "updateMcpServer",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateGenerateMCPRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        },
                        "description": "MCP server updated successfully"
                    }
                },
                "summary": "Update MCP server",
                "tags": [
                    "MCP"
                ],
                "x-resource": "microstrate.hub.patch.update-mcp-server",
                "x-resource-type": "service"
            }
        },
        "/hub/run-logs/search": {
            "post": {
                "description": "Queries and searches through flow execution logs",
                "operationId": "searchLogs",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "end_time": {
                                        "format": "date-time",
                                        "type": "string"
                                    },
                                    "limit": {
                                        "default": 100,
                                        "type": "integer"
                                    },
                                    "query": {
                                        "description": "Search query",
                                        "type": "string"
                                    },
                                    "start_time": {
                                        "format": "date-time",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "results": {
                                            "items": {
                                                "type": "object"
                                            },
                                            "type": "array"
                                        },
                                        "total": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        },
                        "description": "Logs retrieved successfully"
                    }
                },
                "summary": "Search flow run logs",
                "tags": [
                    "Logs"
                ],
                "x-resource": "microstrate.hub.post.search-logs",
                "x-resource-type": "service"
            }
        },
        "/hub/run-stats": {
            "get": {
                "description": "Retrieves statistics about workflow execution including runs, paused, and errored flows",
                "operationId": "getRunStats",
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "example": {
                                    "errored": 8,
                                    "paused": 12,
                                    "runs": 1523
                                },
                                "schema": {
                                    "properties": {
                                        "errored": {
                                            "description": "Number of workflows with errors",
                                            "type": "integer"
                                        },
                                        "paused": {
                                            "description": "Number of paused workflows",
                                            "type": "integer"
                                        },
                                        "runs": {
                                            "description": "Total number of workflow runs",
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        },
                        "description": "Run statistics retrieved successfully"
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        },
                        "description": "Bad request"
                    }
                },
                "summary": "Get flow run statistics",
                "tags": [
                    "Statistics"
                ],
                "x-resource": "microstrate.hub.get.run-stats",
                "x-resource-type": "service"
            }
        },
        "/hub/schedule": {
            "post": {
                "description": "Schedules a workflow to run at specified times or intervals",
                "operationId": "scheduleFlowRun",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "examples": {
                                "scheduleOnce": {
                                    "summary": "Schedule for a specific time",
                                    "value": {
                                        "description": "Generate daily sales report",
                                        "name": "Daily Report",
                                        "payload": {
                                            "subject": "ms.hub.config.workflow.1234567890.report-flow",
                                            "trigger": {
                                                "report_type": "sales"
                                            }
                                        },
                                        "topic": "daily-report-123",
                                        "trigger_on": "2025-06-01T09:00:00Z"
                                    }
                                },
                                "scheduleRecurring": {
                                    "summary": "Schedule recurring execution",
                                    "value": {
                                        "description": "Sync data every hour",
                                        "name": "Hourly Sync",
                                        "payload": {
                                            "subject": "ms.hub.config.workflow.1234567890.sync-flow",
                                            "trigger": {
                                                "source": "external-db"
                                            }
                                        },
                                        "topic": "hourly-sync-456",
                                        "trigger_every": "1h"
                                    }
                                }
                            },
                            "schema": {
                                "$ref": "#/components/schemas/ScheduleFlowRun"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        },
                        "description": "Flow scheduled successfully"
                    }
                },
                "summary": "Schedule a flow run",
                "tags": [
                    "Scheduling"
                ],
                "x-resource": "microstrate.hub.post.schedule-flow",
                "x-resource-type": "service"
            }
        },
        "/hub/scheduled": {
            "get": {
                "description": "Retrieves a list of scheduled flow runs for the authenticated user",
                "operationId": "listScheduledFlows",
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "results": {
                                            "items": {
                                                "$ref": "#/components/schemas/ScheduleFlowRun"
                                            },
                                            "type": "array"
                                        },
                                        "results_total": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        },
                        "description": "Scheduled flows retrieved successfully"
                    }
                },
                "summary": "List scheduled flow runs",
                "tags": [
                    "Scheduling"
                ],
                "x-resource": "microstrate.hub.get.scheduled-flows",
                "x-resource-type": "service"
            }
        },
        "/hub/test-eval": {
            "post": {
                "description": "Tests JavaScript evaluation for workflow nodes",
                "operationId": "testEval",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "example": {
                                "code": "const total = params.items.reduce((sum, item) => sum + item.price, 0); return total;",
                                "params": {
                                    "items": [
                                        {
                                            "price": 10
                                        },
                                        {
                                            "price": 20
                                        }
                                    ]
                                }
                            },
                            "schema": {
                                "properties": {
                                    "code": {
                                        "description": "JavaScript code to evaluate",
                                        "type": "string"
                                    },
                                    "params": {
                                        "description": "Parameters available in the evaluation context",
                                        "type": "object"
                                    }
                                },
                                "required": [
                                    "code"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "result": {
                                            "description": "Evaluation result"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        },
                        "description": "Evaluation result"
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        },
                        "description": "Evaluation error"
                    }
                },
                "summary": "Test eval function",
                "tags": [
                    "Testing"
                ],
                "x-resource": "microstrate.hub.post.test-eval",
                "x-resource-type": "service"
            }
        },
        "/hub/test-jpath": {
            "post": {
                "description": "Tests JPath expression evaluation for data transformation",
                "operationId": "testJPath",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "example": {
                                "data": {
                                    "user": {
                                        "age": 30,
                                        "name": "John"
                                    }
                                },
                                "path": "user.name"
                            },
                            "schema": {
                                "properties": {
                                    "data": {
                                        "description": "Input data to transform"
                                    },
                                    "path": {
                                        "description": "JPath expression or mapping object"
                                    }
                                },
                                "required": [
                                    "data",
                                    "path"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "result": {
                                            "description": "Transformed data"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        },
                        "description": "JPath evaluation result"
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        },
                        "description": "JPath error"
                    }
                },
                "summary": "Test JPath mapping",
                "tags": [
                    "Testing"
                ],
                "x-resource": "microstrate.hub.post.test-jpath",
                "x-resource-type": "service"
            }
        },
        "/hub/unschedule/{topic}": {
            "delete": {
                "description": "Removes a scheduled flow run",
                "operationId": "unscheduleFlowRun",
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        },
                        "description": "Flow unscheduled successfully"
                    }
                },
                "summary": "Unschedule a flow run",
                "tags": [
                    "Scheduling"
                ],
                "x-resource": "microstrate.hub.delete.unschedule-flow",
                "x-resource-type": "service"
            },
            "parameters": [
                {
                    "description": "Topic of the scheduled flow to unschedule",
                    "in": "path",
                    "name": "topic",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }
            ]
        },
        "/hub/collections": {
            "post": {
                "tags": [
                    "Collections"
                ],
                "summary": "Create a new collection",
                "description": "Creates a new collection for organizing nodes or workflows",
                "operationId": "createCollection",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.post.collection",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateCollectionRequest"
                            },
                            "examples": {
                                "NodeCollection": {
                                    "summary": "Create a node collection",
                                    "value": {
                                        "name": "Payment Processing Nodes",
                                        "collection_type": "node",
                                        "description": "Collection of reusable payment processing node templates"
                                    }
                                },
                                "WorkflowCollection": {
                                    "summary": "Create a workflow collection",
                                    "value": {
                                        "name": "Order Management Flows",
                                        "collection_type": "workflow",
                                        "description": "Workflows for handling order lifecycle"
                                    }
                                },
                                "MinimalCollection": {
                                    "summary": "Create collection with minimal fields",
                                    "value": {
                                        "name": "Utilities",
                                        "collection_type": "node"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Collection created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CreateCollectionResponse"
                                },
                                "examples": {
                                    "NodeCollectionCreated": {
                                        "summary": "Node collection created",
                                        "value": {
                                            "subject": "ms.hub.config.collection.node.805092869",
                                            "name": "Payment Processing Nodes",
                                            "collection_type": "node",
                                            "topic": "805092869",
                                            "description": "Collection of reusable payment processing node templates",
                                            "modified": 1748533179
                                        }
                                    },
                                    "WorkflowCollectionCreated": {
                                        "summary": "Workflow collection created",
                                        "value": {
                                            "subject": "ms.hub.config.collection.workflow.1508781670",
                                            "name": "Order Management Flows",
                                            "collection_type": "workflow",
                                            "topic": "1508781670",
                                            "description": "Workflows for handling order lifecycle",
                                            "modified": 1748533200
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "NameRequired": {
                                        "value": {
                                            "error": "a name is required"
                                        }
                                    },
                                    "InvalidType": {
                                        "value": {
                                            "error": "invalid collection type. Valid types are: node, workflow"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Collection already exists",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "example": {
                                    "error": "collection exists:ms.hub.config.collection.node.1234567890"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Collections"
                ],
                "summary": "List collections",
                "description": "Retrieves a list of collections",
                "operationId": "getCollections",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.list-collections",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/queryCollectionType"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Collection retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "required": [
                                        "results",
                                        "results_total"
                                    ],
                                    "properties": {
                                        "results": {
                                            "type": "array",
                                            "description": "Array of results",
                                            "items": {
                                                "$ref": "#/components/schemas/GetCollectionResponse"
                                            }
                                        },
                                        "results_total": {
                                            "type": "integer",
                                            "description": "Number of results"
                                        }
                                    }
                                },
                                "examples": {
                                    "AllCollections": {
                                        "summary": "List all collections (no filter)",
                                        "value": {
                                            "results_total": 4,
                                            "results": [
                                                {
                                                    "collection_type": "node",
                                                    "description": "Payment processing node templates",
                                                    "modified": 1748533179,
                                                    "name": "Payment Nodes",
                                                    "sequence": 16,
                                                    "subject": "ms.hub.config.collection.node.805092869",
                                                    "topic": "805092869",
                                                    "type": "created"
                                                },
                                                {
                                                    "collection_type": "node",
                                                    "description": "Utility functions for data transformation",
                                                    "modified": 1748533200,
                                                    "name": "Data Transform Nodes",
                                                    "sequence": 24,
                                                    "subject": "ms.hub.config.collection.node.1025086208",
                                                    "topic": "1025086208",
                                                    "type": "updated"
                                                },
                                                {
                                                    "collection_type": "workflow",
                                                    "description": "Order lifecycle management",
                                                    "modified": 1748533250,
                                                    "name": "Order Flows",
                                                    "sequence": 31,
                                                    "subject": "ms.hub.config.collection.workflow.1508781670",
                                                    "topic": "1508781670",
                                                    "type": "created"
                                                },
                                                {
                                                    "collection_type": "workflow",
                                                    "description": "",
                                                    "modified": 1748533300,
                                                    "name": "Notification Flows",
                                                    "sequence": 45,
                                                    "subject": "ms.hub.config.collection.workflow.2098761234",
                                                    "topic": "2098761234",
                                                    "type": "created"
                                                }
                                            ]
                                        }
                                    },
                                    "NodeCollectionsOnly": {
                                        "summary": "List node collections only",
                                        "value": {
                                            "results_total": 2,
                                            "results": [
                                                {
                                                    "collection_type": "node",
                                                    "description": "Payment processing node templates",
                                                    "modified": 1748533179,
                                                    "name": "Payment Nodes",
                                                    "sequence": 16,
                                                    "subject": "ms.hub.config.collection.node.805092869",
                                                    "topic": "805092869",
                                                    "type": "created"
                                                },
                                                {
                                                    "collection_type": "node",
                                                    "description": "Utility functions for data transformation",
                                                    "modified": 1748533200,
                                                    "name": "Data Transform Nodes",
                                                    "sequence": 24,
                                                    "subject": "ms.hub.config.collection.node.1025086208",
                                                    "topic": "1025086208",
                                                    "type": "updated"
                                                }
                                            ]
                                        }
                                    },
                                    "WorkflowCollectionsOnly": {
                                        "summary": "List workflow collections only",
                                        "value": {
                                            "results_total": 2,
                                            "results": [
                                                {
                                                    "collection_type": "workflow",
                                                    "description": "Order lifecycle management",
                                                    "modified": 1748533250,
                                                    "name": "Order Flows",
                                                    "sequence": 31,
                                                    "subject": "ms.hub.config.collection.workflow.1508781670",
                                                    "topic": "1508781670",
                                                    "type": "created"
                                                },
                                                {
                                                    "collection_type": "workflow",
                                                    "description": "",
                                                    "modified": 1748533300,
                                                    "name": "Notification Flows",
                                                    "sequence": 45,
                                                    "subject": "ms.hub.config.collection.workflow.2098761234",
                                                    "topic": "2098761234",
                                                    "type": "created"
                                                }
                                            ]
                                        }
                                    },
                                    "EmptyResult": {
                                        "summary": "No collections found",
                                        "value": {
                                            "results_total": 0,
                                            "results": []
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "InvalidSubject": {
                                        "value": {
                                            "error": "invalid subject"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/collections/{collection_type}/{collection_topic}": {
            "parameters": [
                {
                    "$ref": "#/components/parameters/collectionType"
                },
                {
                    "$ref": "#/components/parameters/collectionTopic"
                }
            ],
            "get": {
                "tags": [
                    "Collections"
                ],
                "summary": "Get a collection",
                "description": "Retrieves a specific collection",
                "operationId": "getCollection",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.collection",
                "responses": {
                    "200": {
                        "description": "Collection retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GetCollectionResponse"
                                },
                                "examples": {
                                    "NodeCollection": {
                                        "summary": "Retrieved node collection",
                                        "value": {
                                            "collection_type": "node",
                                            "description": "Payment processing node templates",
                                            "modified": 1748533179,
                                            "name": "Payment Nodes",
                                            "sequence": 16,
                                            "subject": "ms.hub.config.collection.node.805092869",
                                            "topic": "805092869",
                                            "type": "created"
                                        }
                                    },
                                    "WorkflowCollection": {
                                        "summary": "Retrieved workflow collection",
                                        "value": {
                                            "collection_type": "workflow",
                                            "description": "Order lifecycle management workflows",
                                            "modified": 1748533250,
                                            "name": "Order Flows",
                                            "sequence": 124,
                                            "subject": "ms.hub.config.collection.workflow.1508781670",
                                            "topic": "1508781670",
                                            "type": "updated"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "InvalidSubject": {
                                        "value": {
                                            "error": "invalid subject"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "Collections"
                ],
                "summary": "Update a Workflow or Node collection",
                "description": "Updates an existing collection's properties",
                "operationId": "updateFlowOrNodeCollection",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.patch.collection",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateCollectionRequest"
                            },
                            "examples": {
                                "UpdateDescription": {
                                    "summary": "Update collection description",
                                    "value": {
                                        "subject": "ms.hub.config.collection.node.805092869",
                                        "description": "Updated: Payment and billing node templates for all transaction types"
                                    }
                                },
                                "ClearDescription": {
                                    "summary": "Clear collection description",
                                    "value": {
                                        "subject": "ms.hub.config.collection.workflow.1508781670",
                                        "description": ""
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Collection updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                },
                                "example": {
                                    "message": "success"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "SubjectRequired": {
                                        "value": {
                                            "error": "a subject is required"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Collection not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "example": {
                                    "error": "collection does not exists"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Collections"
                ],
                "summary": "Delete a collection",
                "description": "Deletes a specific collection by subject",
                "operationId": "deleteCollection",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.delete.collection",
                "parameters": [
                    {
                        "name": "move_resources_to_collection",
                        "in": "query",
                        "description": "A topic of another collection where resources can be moved",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "example": "993267890"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Collection deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                },
                                "example": {
                                    "message": "success"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "InvalidSubject": {
                                        "value": {
                                            "error": "invalid subject"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Resource not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "CollectionNotFount": {
                                        "value": {
                                            "error": "collection not found"
                                        }
                                    },
                                    "NewResourceCollectionNotFount": {
                                        "value": {
                                            "error": "the new resource collection is not found"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/nodes": {
            "post": {
                "tags": [
                    "Nodes"
                ],
                "summary": "Create a new node",
                "description": "Creates a new node template within a collection",
                "operationId": "createNode",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.post.node",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateNodeRequest"
                            },
                            "examples": {
                                "FunctionNode": {
                                    "summary": "Create a function node",
                                    "value": {
                                        "collection": "ms.hub.config.collection.node.805092869",
                                        "data": {
                                            "id": "PROCESS_PAYMENT",
                                            "name": "ProcessPayment",
                                            "description": "Processes a payment transaction via Stripe",
                                            "node_type": "function",
                                            "subject": "ms.compute.9153241292.function.912643023",
                                            "payload": {
                                                "amount": "$.trigger.amount",
                                                "currency": "$.trigger.currency",
                                                "customer_id": "$.trigger.customer_id"
                                            },
                                            "options": {
                                                "timeout": 30000,
                                                "attempts": 3,
                                                "backoff_ms": 1000
                                            }
                                        }
                                    }
                                },
                                "MapNode": {
                                    "summary": "Create a map/transformation node using json path",
                                    "value": {
                                        "collection": "ms.hub.config.collection.node.1025086208",
                                        "data": {
                                            "id": "TRANSFORM_ORDER_DATA",
                                            "name": "TransformOrderData",
                                            "description": "Transforms order data for downstream processing",
                                            "node_type": "map",
                                            "payload": {
                                                "order_id": "$.trigger.id",
                                                "total_amount": "$.ITEMS_TOTAL",
                                                "customer": {
                                                    "email": "$.trigger.customer.email",
                                                    "name": "$.trigger.customer.full_name"
                                                }
                                            }
                                        }
                                    }
                                },
                                "ConditionNode": {
                                    "summary": "Create a condition/branching node",
                                    "value": {
                                        "collection": "ms.hub.config.collection.node.805092869",
                                        "data": {
                                            "id": "CHECK_ORDER_AMOUNT",
                                            "name": "CheckOrderAmount",
                                            "description": "Routes high-value orders to priority processing",
                                            "node_type": "condition",
                                            "payload": [
                                                {
                                                    "condition": {
                                                        "operator": ">",
                                                        "input": [
                                                            "$.GET_ORDER.amount",
                                                            100
                                                        ]
                                                    },
                                                    "outcome": "PRIORITISE"
                                                },
                                                {
                                                    "outcome": "RESOLVE_SUCCESS"
                                                }
                                            ]
                                        }
                                    }
                                },
                                "EvalNode": {
                                    "summary": "Create an eval node for to run javascript expressions",
                                    "value": {
                                        "collection": "ms.hub.config.collection.node.1025086208",
                                        "data": {
                                            "id": "CALCULATE_DISCOUNT",
                                            "name": "CalculateDiscount",
                                            "description": "Calculates discount based on order value",
                                            "node_type": "eval",
                                            "payload": {
                                                "code": "total > 500 ? total * 0.1 : total * 0.05",
                                                "params": {
                                                    "total": "$.trigger.total"
                                                }
                                            }
                                        }
                                    }
                                },
                                "FlowNode": {
                                    "summary": "Create a flow invocation node",
                                    "value": {
                                        "collection": "ms.hub.config.collection.node.805092869",
                                        "data": {
                                            "id": "SEND_NOTIFICATION",
                                            "name": "SendNotification",
                                            "description": "Invokes the notification workflow",
                                            "node_type": "flow",
                                            "subject": "ms.hub.config.workflow.1508781670.1961275695",
                                            "payload": {
                                                "recipient": "$.trigger.customer.email",
                                                "template": "order_confirmation",
                                                "amount": "$.PRICING.total"
                                            },
                                            "await": false
                                        }
                                    }
                                },
                                "IntegrationNode": {
                                    "summary": "Create an integration node",
                                    "value": {
                                        "collection": "ms.hub.config.collection.node.805092869",
                                        "data": {
                                            "id": "SLACK_NOTIFY",
                                            "name": "SlackNotify",
                                            "description": "Sends notification to Slack channel",
                                            "node_type": "integration",
                                            "subject": "integration.slack.post-message",
                                            "payload": {
                                                "url": "/chat.postMessage",
                                                "method": "post",
                                                "headers": {
                                                    "Authorization": "SECRET::SLACK_BOT_TOKEN::",
                                                    "Content-Type": "multipart/form-data"
                                                },
                                                "data": {
                                                    "channel": "<string>",
                                                    "text": "<string>"
                                                },
                                                "baseURL": "https://slack.com/api"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Node created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CreateNodeResponse"
                                },
                                "examples": {
                                    "FunctionNodeCreated": {
                                        "summary": "Function node created",
                                        "value": {
                                            "subject": "ms.hub.config.node.805092869.98765432",
                                            "collection": "ms.hub.config.collection.node.805092869",
                                            "data": {
                                                "id": "98765432",
                                                "name": "ProcessPayment",
                                                "description": "Processes a payment transaction via Stripe",
                                                "node_type": "function",
                                                "subject": "ms.compute.9153241292.function.912643023",
                                                "payload": {
                                                    "amount": "$.trigger.amount",
                                                    "currency": "$.trigger.currency",
                                                    "customer_id": "$.trigger.customer_id"
                                                },
                                                "options": {
                                                    "timeout": 30000,
                                                    "attempts": 3,
                                                    "backoff_ms": 1000
                                                }
                                            },
                                            "type": "created",
                                            "modified": 1748533179
                                        }
                                    },
                                    "MapNodeCreated": {
                                        "summary": "Map node created",
                                        "value": {
                                            "subject": "ms.hub.config.node.1025086208.12345678",
                                            "collection": "ms.hub.config.collection.node.1025086208",
                                            "data": {
                                                "id": "12345678",
                                                "name": "TransformOrderData",
                                                "description": "Transforms order data for downstream processing",
                                                "node_type": "map",
                                                "payload": {
                                                    "order_id": "$.trigger.id",
                                                    "total_amount": "$.trigger.items | sum('price')"
                                                }
                                            },
                                            "type": "created",
                                            "modified": 1748533200
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "NameRequired": {
                                        "value": {
                                            "error": "data.name is required"
                                        }
                                    },
                                    "CollectionRequired": {
                                        "value": {
                                            "error": "a collection subject is required"
                                        }
                                    },
                                    "InvalidCollection": {
                                        "value": {
                                            "error": "invalid collection subject"
                                        }
                                    },
                                    "PayloadRequired": {
                                        "value": {
                                            "error": "payload is required"
                                        }
                                    },
                                    "FunctionSubjectRequired": {
                                        "value": {
                                            "error": "a function subject is required"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Resource not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "CollectionNotFound": {
                                        "value": {
                                            "error": "collection not found"
                                        }
                                    },
                                    "FunctionNotFound": {
                                        "value": {
                                            "error": "function not found"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Node already exists",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "example": {
                                    "error": "node exists:ms.hub.config.node.1234567890.98765432"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Nodes"
                ],
                "summary": "List node templates",
                "description": "Retrieves a list of node templates, optionally filtered by collection and type",
                "operationId": "listNodeTemplates",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.list-nodes",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/queryCollectionTopic"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Nodes retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ListNodesResponse"
                                },
                                "examples": {
                                    "AllNodes": {
                                        "summary": "List all nodes",
                                        "value": {
                                            "results_total": 3,
                                            "results": [
                                                {
                                                    "subject": "ms.hub.config.node.805092869.98765432",
                                                    "collection": "ms.hub.config.collection.node.805092869",
                                                    "data": {
                                                        "id": "98765432",
                                                        "name": "ProcessPayment",
                                                        "description": "Processes payment via Stripe",
                                                        "node_type": "function",
                                                        "subject": "ms.compute.9153241292.function.912643023",
                                                        "payload": {
                                                            "amount": "$.trigger.amount"
                                                        }
                                                    },
                                                    "type": "created",
                                                    "modified": 1748533179
                                                },
                                                {
                                                    "subject": "ms.hub.config.node.805092869.11223344",
                                                    "collection": "ms.hub.config.collection.node.805092869",
                                                    "data": {
                                                        "id": "11223344",
                                                        "name": "ValidateCard",
                                                        "node_type": "function",
                                                        "subject": "ms.compute.9279840291.function.636343114",
                                                        "payload": {
                                                            "card_number": "$.trigger.card"
                                                        }
                                                    },
                                                    "type": "updated",
                                                    "modified": 1748533200
                                                },
                                                {
                                                    "subject": "ms.hub.config.node.1025086208.55667788",
                                                    "collection": "ms.hub.config.collection.node.1025086208",
                                                    "data": {
                                                        "id": "55667788",
                                                        "name": "TransformData",
                                                        "node_type": "map",
                                                        "payload": {
                                                            "output": "$.trigger.input | uppercase"
                                                        }
                                                    },
                                                    "type": "created",
                                                    "modified": 1748533250
                                                }
                                            ]
                                        }
                                    },
                                    "FilteredByCollection": {
                                        "summary": "Nodes filtered by collection",
                                        "value": {
                                            "results_total": 2,
                                            "results": [
                                                {
                                                    "subject": "ms.hub.config.node.805092869.98765432",
                                                    "collection": "ms.hub.config.collection.node.805092869",
                                                    "data": {
                                                        "id": "98765432",
                                                        "name": "ProcessPayment",
                                                        "node_type": "function",
                                                        "payload": {},
                                                        "subject": "ms.compute.9153241292.function.912643023"
                                                    },
                                                    "type": "created",
                                                    "modified": 1748533179
                                                },
                                                {
                                                    "subject": "ms.hub.config.node.805092869.11223344",
                                                    "collection": "ms.hub.config.collection.node.805092869",
                                                    "data": {
                                                        "id": "11223344",
                                                        "name": "ValidateCard",
                                                        "node_type": "function",
                                                        "payload": {},
                                                        "subject": "ms.compute.9279840291.function.636343114"
                                                    },
                                                    "type": "updated",
                                                    "modified": 1748533200
                                                }
                                            ]
                                        }
                                    },
                                    "EmptyResult": {
                                        "summary": "No nodes found",
                                        "value": {
                                            "results_total": 0,
                                            "results": []
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "example": {
                                    "error": "invalid request"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/nodes/{collection_topic}/{node_topic}": {
            "parameters": [
                {
                    "$ref": "#/components/parameters/collectionTopic"
                },
                {
                    "$ref": "#/components/parameters/nodeTopic"
                }
            ],
            "get": {
                "tags": [
                    "Nodes"
                ],
                "summary": "Get a node",
                "description": "Retrieves a specific node by subject",
                "operationId": "getNode",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.node",
                "responses": {
                    "200": {
                        "description": "Node retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GetNodeResponse"
                                },
                                "examples": {
                                    "FunctionNode": {
                                        "summary": "Retrieved function node",
                                        "value": {
                                            "subject": "ms.hub.config.node.805092869.98765432",
                                            "data": {
                                                "id": "PROCESS_PAYMENT",
                                                "name": "ProcessPayment",
                                                "description": "Processes a payment transaction via Stripe",
                                                "node_type": "function",
                                                "subject": "ms.compute.9153241292.function.912643023",
                                                "payload": {
                                                    "amount": "$.trigger.amount",
                                                    "currency": "$.trigger.currency",
                                                    "customer_id": "$.trigger.customer_id"
                                                },
                                                "options": {
                                                    "timeout": 30000,
                                                    "attempts": 3,
                                                    "backoff_ms": 1000,
                                                    "ignore_response_codes": [
                                                        404,
                                                        429
                                                    ]
                                                }
                                            },
                                            "modified": 1748533179
                                        }
                                    },
                                    "MapNode": {
                                        "summary": "Retrieved map node",
                                        "value": {
                                            "subject": "ms.hub.config.node.1025086208.55667788",
                                            "data": {
                                                "id": "55667788",
                                                "name": "TransformOrderData",
                                                "description": "Transforms order data structure",
                                                "node_type": "map",
                                                "payload": {
                                                    "order_id": "$.trigger.id",
                                                    "total": "$.trigger.items | sum('price')",
                                                    "customer_email": "$.trigger.customer.email"
                                                },
                                                "response_map": {
                                                    "processed_order": "{{result"
                                                }
                                            },
                                            "modified": 1748533200
                                        }
                                    },
                                    "ConditionNode": {
                                        "summary": "Retrieved condition node",
                                        "value": {
                                            "subject": "ms.hub.config.node.805092869.33445566",
                                            "data": {
                                                "id": "33445566",
                                                "name": "CheckOrderValue",
                                                "description": "Routes orders based on value threshold",
                                                "node_type": "condition",
                                                "payload": [
                                                    {
                                                        "condition": {
                                                            "operator": ">",
                                                            "input": [
                                                                "$.CHECK_BALANCE",
                                                                0
                                                            ]
                                                        },
                                                        "outcome": "SEND_EMAIL"
                                                    },
                                                    {
                                                        "outcome": "RESOLVE_SUCCESS"
                                                    }
                                                ]
                                            },
                                            "modified": 1748533250
                                        }
                                    },
                                    "FlowNode": {
                                        "summary": "Retrieved flow invocation node",
                                        "value": {
                                            "subject": "ms.hub.config.node.805092869.77889900",
                                            "data": {
                                                "id": "77889900",
                                                "name": "TriggerNotificationFlow",
                                                "description": "Invokes notification workflow asynchronously",
                                                "node_type": "flow",
                                                "subject": "ms.hub.config.workflow.1508781670.notify",
                                                "payload": {
                                                    "recipient": "$.trigger.email",
                                                    "message": "$.trigger.message"
                                                },
                                                "await": false,
                                                "options": {
                                                    "timeout": 60000
                                                }
                                            },
                                            "modified": 1748533300
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "InvalidSubject": {
                                        "value": {
                                            "error": "invalid subject"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "Nodes"
                ],
                "summary": "Update a node",
                "description": "Updates an existing node's properties",
                "operationId": "updateNode",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.patch.node",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateNodeRequest"
                            },
                            "examples": {
                                "UpdatePayload": {
                                    "summary": "Update node payload",
                                    "value": {
                                        "subject": "ms.hub.config.node.805092869.98765432",
                                        "data": {
                                            "id": "ProcessPayment",
                                            "name": "ProcessPayment",
                                            "node_type": "function",
                                            "subject": "ms.compute.9153241292.function.912643023",
                                            "payload": {
                                                "amount": "$.trigger.amount",
                                                "currency": "$.trigger.currency",
                                                "customer_id": "$.trigger.customer_id",
                                                "metadata": {
                                                    "order_id": "$.trigger.order_id"
                                                }
                                            }
                                        }
                                    }
                                },
                                "UpdateOptions": {
                                    "summary": "Update node options",
                                    "value": {
                                        "subject": "ms.hub.config.node.805092869.98765432",
                                        "data": {
                                            "id": "ProcessPayment",
                                            "name": "ProcessPayment",
                                            "node_type": "function",
                                            "subject": "ms.compute.9153241292.function.912643023",
                                            "payload": {
                                                "amount": "$.trigger.amount"
                                            },
                                            "options": {
                                                "timeout": 60000,
                                                "attempts": 5,
                                                "backoff_ms": 2000,
                                                "ignore_response_codes": [
                                                    404,
                                                    429,
                                                    503
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Node updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                },
                                "example": {
                                    "message": "success"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "SubjectRequired": {
                                        "value": {
                                            "error": "a subject is required"
                                        }
                                    },
                                    "FunctionNotFound": {
                                        "value": {
                                            "error": "function not found"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Resource not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "FlowNotFound": {
                                        "value": {
                                            "error": "flow not found"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Nodes"
                ],
                "summary": "Delete a node",
                "description": "Deletes a specific node by subject",
                "operationId": "deleteNode",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.delete.node",
                "responses": {
                    "200": {
                        "description": "Node deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                },
                                "example": {
                                    "message": "success"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "InvalidSubject": {
                                        "value": {
                                            "error": "invalid subject"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/nodes/batch": {
            "patch": {
                "tags": [
                    "Nodes"
                ],
                "summary": "Update multiple nodes",
                "description": "Updates multiple existing nodes in a single request",
                "operationId": "updateMultipleNodes",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.patch.nodes",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateMultiNodeRequest"
                            },
                            "examples": {
                                "UpdateMultipleFunctionNodes": {
                                    "summary": "Update multiple function nodes",
                                    "value": [
                                        {
                                            "subject": "ms.hub.config.node.805092869.98765432",
                                            "data": {
                                                "id": "PROCESS_PAYMENT_V2",
                                                "name": "ProcessPaymentV2",
                                                "node_type": "function",
                                                "subject": "ms.compute.9153241292.function.912643023-v2",
                                                "payload": {
                                                    "amount": "$.trigger.amount",
                                                    "currency": "$.trigger.currency"
                                                },
                                                "options": {
                                                    "timeout": 45000
                                                }
                                            }
                                        },
                                        {
                                            "subject": "ms.hub.config.node.805092869.11223344",
                                            "data": {
                                                "id": "VALIDATE_CARD_V2",
                                                "name": "ValidateCardV2",
                                                "node_type": "function",
                                                "subject": "ms.compute.9279840291.function.636343114-v2",
                                                "payload": {
                                                    "card_number": "$.trigger.card",
                                                    "cvv": "$.trigger.cvv"
                                                }
                                            }
                                        }
                                    ]
                                },
                                "UpdateMixedNodeTypes": {
                                    "summary": "Update nodes of different types",
                                    "value": [
                                        {
                                            "subject": "ms.hub.config.node.805092869.98765432",
                                            "data": {
                                                "id": "PROCESS_PAYMENT",
                                                "name": "ProcessPayment",
                                                "node_type": "function",
                                                "subject": "ms.compute.9153241292.function.912643023",
                                                "payload": {
                                                    "amount": "$.trigger.amount"
                                                }
                                            }
                                        },
                                        {
                                            "subject": "ms.hub.config.node.1025086208.55667788",
                                            "data": {
                                                "id": "TRANSFORM_ORDER",
                                                "name": "TransformOrder",
                                                "node_type": "map",
                                                "payload": {
                                                    "order_id": "$.trigger.id",
                                                    "status": "processed"
                                                }
                                            }
                                        },
                                        {
                                            "subject": "ms.hub.config.node.805092869.33445566",
                                            "data": {
                                                "id": "$.CHECK_THRESHOLD",
                                                "name": "CheckThreshold",
                                                "node_type": "condition",
                                                "payload": [
                                                    {
                                                        "condition": {
                                                            "operator": ">",
                                                            "input": [
                                                                "$.CHECK_THRESHOLD",
                                                                500
                                                            ]
                                                        },
                                                        "outcome": "SEND_EMAIL"
                                                    },
                                                    {
                                                        "outcome": "RESOLVE_SUCCESS"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "All nodes updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UpdateMultiNodeResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Some nodes failed to update",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UpdateMultiNodeErrorResponse"
                                },
                                "example": {
                                    "body": [
                                        {
                                            "node": {
                                                "subject": "ms.hub.config.node.1234567890.98765432",
                                                "data": {
                                                    "id": "UpdatedNode1",
                                                    "name": "UpdatedNode1",
                                                    "node_type": "function",
                                                    "subject": "ms.compute.1601620291.function.185846119",
                                                    "payload": {
                                                        "param1": "value1"
                                                    }
                                                }
                                            },
                                            "result": "succes"
                                        },
                                        {
                                            "node": {
                                                "subject": "ms.hub.config.node.1234567890.12345678",
                                                "data": {
                                                    "id": "UpdatedNode2",
                                                    "name": "UpdatedNode2",
                                                    "node_type": "function",
                                                    "subject": "ms.compute.1601620291.function.185846119",
                                                    "payload": {
                                                        "param2": "value2"
                                                    }
                                                }
                                            },
                                            "result": "error: function not found"
                                        }
                                    ],
                                    "error": "some nodes failed to upsert"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/workflows": {
            "post": {
                "summary": "Create a new workflow",
                "description": "Creates a new workflow in draft mode within a specified collection. Workflows are directed acyclic graphs (DAGs) composed of nodes (agents, functions, etc.) connected by edges that define execution flow. The workflow is validated before creation to ensure all nodes and edges are properly configured.",
                "operationId": "createWorkflow",
                "tags": [
                    "Workflows"
                ],
                "parameters": [
                    {
                        "name": "validate",
                        "in": "query",
                        "description": "Whether to validate the workflow configuration before creation. Validation checks for duplicate IDs, missing nodes/edges, reserved word conflicts, and verifies that referenced functions and flows exist.",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": true
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateWorkflowRequest"
                            },
                            "examples": {
                                "simpleAgent": {
                                    "summary": "Simple AI agent workflow",
                                    "description": "A workflow with a trigger node connected to an AI agent that converts HTTP requests to axios format",
                                    "value": {
                                        "name": "Request to HTTP node converter",
                                        "description": "Converts HTTP request snippets to axios format",
                                        "collection": "ms.hub.config.collection.workflow.2408930879",
                                        "config": {
                                            "nodes": [
                                                {
                                                    "id": "CLAUDE_AGENT",
                                                    "data": {
                                                        "id": "CLAUDE_AGENT",
                                                        "name": "Claude Agent",
                                                        "node_type": "agent",
                                                        "payload": {
                                                            "api_key": "CLAUDE_API_KEY",
                                                            "await": true,
                                                            "behaviour": "You convert any code snippet of an http request into the correct json shape for an axios http request.",
                                                            "llm_provider": "claude",
                                                            "model": "claude-3-5-haiku-20241022",
                                                            "output_schema": {
                                                                "url": "the full url of the request",
                                                                "method": "the http method such as GET, POST, etc.",
                                                                "headers": "key-value object, the headers of the request",
                                                                "data": "the body of the http request"
                                                            },
                                                            "prompt": "",
                                                            "timeout": 60
                                                        }
                                                    }
                                                }
                                            ],
                                            "edges": []
                                        }
                                    }
                                },
                                "complexMultiAgent": {
                                    "summary": "Multi-agent code generation workflow",
                                    "description": "Complex workflow with multiple AI agents, function calls, and Slack integration. Includes complete UI properties for visual workflow editor.",
                                    "value": {
                                        "name": "Code Expert",
                                        "description": "Creates code snippets and posts results to slack",
                                        "collection": "ms.hub.config.collection.workflow.4285896071",
                                        "config": {
                                            "nodes": [
                                                {
                                                    "id": "CODE_EXPERT",
                                                    "data": {
                                                        "id": "CODE_EXPERT",
                                                        "name": "Code_Expert",
                                                        "node_type": "agent",
                                                        "payload": {
                                                            "api_key": "CLAUDE_API_KEY",
                                                            "await": true,
                                                            "behaviour": "You write concise javascript code. Return only the function and no extra characters.",
                                                            "llm_provider": "workforce",
                                                            "model": "workforce-code:latest",
                                                            "prompt": "Write a function that |$.trigger.description",
                                                            "timeout": 60000000000
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -453.82917984591836,
                                                        "y": 19.49134869829109
                                                    },
                                                    "type": "custom",
                                                    "origin": [
                                                        0.5,
                                                        0
                                                    ],
                                                    "measured": {
                                                        "height": 80,
                                                        "width": 237
                                                    }
                                                },
                                                {
                                                    "id": "CLEAN_UP_FUNCTION",
                                                    "data": {
                                                        "id": "CLEAN_UP_FUNCTION",
                                                        "name": "Clean Up Function",
                                                        "node_type": "eval",
                                                        "payload": {
                                                            "code": "'export '+c.replace(s[0],'').replace(s[1],'')",
                                                            "params": {
                                                                "c": "$.CODE_EXPERT.result",
                                                                "s": [
                                                                    "```javascript\n",
                                                                    "\n```"
                                                                ]
                                                            }
                                                        },
                                                        "options": {
                                                            "flat_map": false,
                                                            "backoff_ms": 1000,
                                                            "timeout": 20000,
                                                            "attempts": 3
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -69.33553620187767,
                                                        "y": 99.75552615935474
                                                    },
                                                    "type": "custom",
                                                    "origin": [
                                                        0.5,
                                                        0
                                                    ],
                                                    "measured": {
                                                        "height": 80,
                                                        "width": 80
                                                    }
                                                },
                                                {
                                                    "id": "BASE64_ENCODE",
                                                    "data": {
                                                        "id": "BASE64_ENCODE",
                                                        "name": "Base64 Encode",
                                                        "subject": "ms.compute.1753641292.function.230114167",
                                                        "node_type": "function",
                                                        "payload": "$.CLEAN_UP_FUNCTION"
                                                    },
                                                    "position": {
                                                        "x": 239.41688138565698,
                                                        "y": 112.67388688860652
                                                    },
                                                    "type": "custom",
                                                    "origin": [
                                                        0.5,
                                                        0
                                                    ],
                                                    "measured": {
                                                        "height": 80,
                                                        "width": 80
                                                    }
                                                },
                                                {
                                                    "id": "SLACK_PAYLOAD",
                                                    "data": {
                                                        "id": "SLACK_PAYLOAD",
                                                        "name": "Post to Slack",
                                                        "node_type": "integration",
                                                        "payload": {
                                                            "baseURL": "https://slack.com/api",
                                                            "url": "/chat.postMessage",
                                                            "method": "post",
                                                            "data": {
                                                                "channel": "#engineering",
                                                                "text": "$.CODE_EXPERT.result",
                                                                "username": "Code Expert"
                                                            },
                                                            "headers": {
                                                                "Content-Type": "multipart/form-data"
                                                            }
                                                        },
                                                        "integration_id": "slack",
                                                        "request_type_id": "post_chat_postMessage",
                                                        "oauth": "slack.maria"
                                                    },
                                                    "position": {
                                                        "x": 300.43639515507164,
                                                        "y": 318.6667471851883
                                                    },
                                                    "type": "custom",
                                                    "origin": [
                                                        0.5,
                                                        0
                                                    ],
                                                    "measured": {
                                                        "height": 80,
                                                        "width": 80
                                                    },
                                                    "selectable": true,
                                                    "draggable": true
                                                }
                                            ],
                                            "edges": [
                                                {
                                                    "id": "xy-edge__CODE_EXPERT-CLEAN_UP_FUNCTION",
                                                    "source": "CODE_EXPERT",
                                                    "target": "CLEAN_UP_FUNCTION",
                                                    "sourceHandle": "CODE_EXPERT",
                                                    "targetHandle": "CLEAN_UP_FUNCTION",
                                                    "type": "smoothstep",
                                                    "animated": true,
                                                    "markerEnd": "arrowclosed",
                                                    "style": {
                                                        "stroke": "#4641f2",
                                                        "strokeWidth": 2
                                                    },
                                                    "label": "Process code",
                                                    "labelStyle": {
                                                        "fill": "#666",
                                                        "fontSize": 12
                                                    },
                                                    "labelBgStyle": {
                                                        "fill": "#fff"
                                                    }
                                                },
                                                {
                                                    "id": "xy-edge__CLEAN_UP_FUNCTION-BASE64_ENCODE",
                                                    "source": "CLEAN_UP_FUNCTION",
                                                    "target": "BASE64_ENCODE",
                                                    "sourceHandle": "CLEAN_UP_FUNCTION",
                                                    "targetHandle": "BASE64_ENCODE",
                                                    "type": "default",
                                                    "animated": false,
                                                    "markerEnd": "arrowclosed"
                                                },
                                                {
                                                    "id": "xy-edge__CODE_EXPERT-SLACK_PAYLOAD",
                                                    "source": "CODE_EXPERT",
                                                    "target": "SLACK_PAYLOAD",
                                                    "sourceHandle": "CODE_EXPERT-bottom",
                                                    "targetHandle": "SLACK_PAYLOAD-top",
                                                    "type": "step",
                                                    "animated": true,
                                                    "markerEnd": "arrowclosed",
                                                    "style": {
                                                        "stroke": "#17a2b8",
                                                        "strokeWidth": 2,
                                                        "strokeDasharray": "5,5"
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Workflow created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/WorkflowResponse"
                                },
                                "example": {
                                    "name": "Request to HTTP node converter",
                                    "subject": "ms.hub.config.workflow.draft.2408930879.1009853675",
                                    "modified": 1759180804,
                                    "collection": "ms.hub.config.collection.workflow.2408930879"
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "404": {
                        "description": "Collection not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                },
                                "example": {
                                    "error": "collection not found"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Workflow name already exists in collection",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                },
                                "example": {
                                    "error": "the workflow name has already been used within this collection"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/workflows/{collection_topic}/{flow_topic}": {
            "patch": {
                "summary": "Update a workflow",
                "description": "Updates an existing workflow's configuration, metadata, or archive status. This operation supports partial updates - only provided fields will be modified. The workflow can be in either draft or published state. Note: Updating a published workflow creates a new draft version; you must publish again to make changes live.",
                "operationId": "updateWorkflow",
                "tags": [
                    "Workflows"
                ],
                "parameters": [
                    {
                        "name": "collection_topic",
                        "in": "path",
                        "required": true,
                        "description": "The collection identifier (e.g., 'Demo', 'Engineering')",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "flow_topic",
                        "in": "path",
                        "required": true,
                        "description": "The workflow identifier/hash",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "validate",
                        "in": "query",
                        "description": "Whether to validate the workflow configuration during update",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": true
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateWorkflowRequest"
                            },
                            "examples": {
                                "updateMetadata": {
                                    "summary": "Update workflow name and description",
                                    "value": {
                                        "name": "Enhanced HTTP Converter",
                                        "description": "Now supports more request formats including fetch API"
                                    }
                                },
                                "archiveWorkflow": {
                                    "summary": "Archive a workflow",
                                    "value": {
                                        "archived": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Workflow updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/WorkflowResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "404": {
                        "description": "Workflow not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/workflows/run": {
            "post": {
                "summary": "Execute a workflow",
                "description": "Executes a published workflow with provided trigger data. Supports both synchronous (await) and asynchronous execution modes. Can execute with single or multiple triggers, with optional debouncing and ordering strategies. Session IDs enable conversation continuity for agent-based workflows. The execution creates a unique run ID for tracking and logging.",
                "operationId": "runWorkflow",
                "tags": [
                    "Workflows"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RunWorkflowRequest"
                            },
                            "examples": {
                                "simpleSync": {
                                    "summary": "Simple synchronous execution",
                                    "description": "Execute workflow and wait for completion",
                                    "value": {
                                        "subject": "ms.hub.config.workflow.published.2408930879.1009853675",
                                        "trigger": {
                                            "request": "curl -X GET https://api.example.com/users"
                                        },
                                        "await": true,
                                        "enable_log": false
                                    }
                                },
                                "asyncExecution": {
                                    "summary": "Asynchronous execution",
                                    "description": "Start workflow execution and return immediately with tracking ID",
                                    "value": {
                                        "subject": "ms.hub.config.workflow.published.Engineering.4285896071",
                                        "trigger": {
                                            "description": "Calculate fibonacci sequence",
                                            "name": "fibonacci_calculator"
                                        },
                                        "await": false
                                    }
                                },
                                "withKnowledge": {
                                    "summary": "Execute with knowledge sources",
                                    "description": "Provide knowledge sources for AI agents in the workflow",
                                    "value": {
                                        "subject": "ms.hub.config.workflow.published.Support.3566774667",
                                        "trigger": {
                                            "email": "customer@example.com",
                                            "policy_number": "POL-123456"
                                        },
                                        "knowledge": [
                                            "kv://policy-documents/terms-and-conditions",
                                            "obj://customer-data/policies"
                                        ],
                                        "await": true,
                                        "enable_log": true
                                    }
                                },
                                "withSession": {
                                    "summary": "Execute with session continuity",
                                    "description": "Continue a conversation by providing session ID",
                                    "value": {
                                        "subject": "ms.hub.config.workflow.published.Support.chatbot",
                                        "trigger": {
                                            "message": "What's my policy coverage?"
                                        },
                                        "session_id": "session_abc123xyz",
                                        "await": true
                                    }
                                },
                                "multipleTriggers": {
                                    "summary": "Batch execution with multiple triggers",
                                    "description": "Execute workflow multiple times with different inputs",
                                    "value": {
                                        "subject": "ms.hub.config.workflow.published.DataProcessing.transform",
                                        "triggers": [
                                            {
                                                "user_id": 1,
                                                "action": "login"
                                            },
                                            {
                                                "user_id": 2,
                                                "action": "purchase"
                                            },
                                            {
                                                "user_id": 3,
                                                "action": "logout"
                                            }
                                        ],
                                        "await": true
                                    }
                                },
                                "resumeExecution": {
                                    "summary": "Resume paused workflow",
                                    "description": "Continue execution of a human-in-the-loop workflow",
                                    "value": {
                                        "subject": "ms.hub.config.workflow.published.Approvals.expense",
                                        "run_id": "ms.hub.run.uuid123.ms.hub.config.workflow.published.Approvals.expense",
                                        "trigger": {
                                            "approved": true,
                                            "approver": "manager@company.com"
                                        },
                                        "await": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Workflow execution completed or started successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/RunWorkflowResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "404": {
                        "description": "Workflow not found or not published",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/workflows/{collection_topic}/{flow_topic}/history": {
            "parameters": [
                {
                    "$ref": "#/components/parameters/collectionTopic"
                },
                {
                    "$ref": "#/components/parameters/flowTopic"
                },
                {
                    "$ref": "#/components/parameters/queryDraftFlag"
                }
            ],
            "get": {
                "tags": [
                    "Workflows"
                ],
                "summary": "Workflow Configuration History",
                "description": "Get workflow configuration history",
                "operationId": "workflowHistory",
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.workflow-history",
                "responses": {
                    "200": {
                        "description": "Workflow history",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "description": "An array of full configuration versions",
                                    "items": {
                                        "$ref": "#/components/schemas/WorkflowConfig"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                },
                                "examples": {
                                    "NoTrigger": {
                                        "value": {
                                            "error": "no trigger specified"
                                        }
                                    },
                                    "ArchivedFlow": {
                                        "value": {
                                            "error": "cannot run an archived flow"
                                        }
                                    },
                                    "MissingConfig": {
                                        "value": {
                                            "error": "missing configuration"
                                        }
                                    },
                                    "NodesRequired": {
                                        "value": {
                                            "error": "nodes are required"
                                        }
                                    },
                                    "DebounceError": {
                                        "value": {
                                            "error": "failed to resolve debounceOn"
                                        }
                                    },
                                    "OrderOnError": {
                                        "value": {
                                            "error": "failed to resolve orderOn"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/workflows/publish": {
            "post": {
                "summary": "Publish a workflow",
                "description": "Publishes a draft workflow, making it executable. Publishing validates the workflow, handles scheduled triggers (creating or updating cron jobs), and transitions the workflow from draft to published state. Once published, the workflow can be invoked via the run endpoint or triggered automatically based on configured triggers.",
                "operationId": "publishWorkflow",
                "tags": [
                    "Workflows"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PublishWorkflowRequest"
                            },
                            "examples": {
                                "basic": {
                                    "summary": "Publish a draft workflow",
                                    "value": {
                                        "subject": "ms.hub.config.workflow.draft.2408930879.1009853675",
                                        "commit": "Initial release"
                                    }
                                },
                                "withSchedule": {
                                    "summary": "Publish workflow with scheduled trigger",
                                    "description": "When publishing a workflow with schedule triggers, the system automatically sets up cron jobs",
                                    "value": {
                                        "subject": "ms.hub.config.workflow.draft.Engineering.2489512104",
                                        "commit": "Added daily data sync at 2 AM"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Workflow published successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/PublishResponse"
                                },
                                "example": {
                                    "success": true,
                                    "subject": "ms.hub.config.workflow.published.2408930879.1009853675",
                                    "message": "Workflow published successfully"
                                }
                            }
                        }
                    },
                    "400": {
                        "$ref": "#/components/responses/BadRequest"
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "404": {
                        "description": "Draft workflow not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/integrations/oauth-config": {
            "get": {
                "summary": "List OAuth configurations",
                "description": "Get list of all OAuth configurations",
                "operationId": "getIntegrationsOauthConfigs",
                "tags": [
                    "Oauth"
                ],
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.oauth-configs",
                "responses": {
                    "200": {
                        "description": "List of OAuth configurations",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/OauthConfigList"
                                },
                                "example": {
                                    "results": [
                                        {
                                            "integration_id": "slack",
                                            "name": "Slack API",
                                            "scopes": "channels:read,chat:write,users:read",
                                            "subject": "ms.integration.oauth.config.slack"
                                        },
                                        {
                                            "integration_id": "xero",
                                            "name": "Xero API's",
                                            "scopes": "email,openid,profile,assets,assets.read,files,files.read,projects,projects.read",
                                            "subject": "ms.integration.oauth.config.xero"
                                        },
                                        {
                                            "integration_id": "google",
                                            "name": "Google Workspace",
                                            "scopes": "https://www.googleapis.com/auth/gmail.readonly,https://www.googleapis.com/auth/calendar",
                                            "subject": "ms.integration.oauth.config.google"
                                        }
                                    ],
                                    "results_total": 3
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/integrations/{integration_id}/oauth-config": {
            "parameters": [
                {
                    "$ref": "#/components/parameters/integrationId"
                }
            ],
            "get": {
                "summary": "Get OAuth configuration",
                "description": "Get OAuth configuration for a specific integration",
                "operationId": "getIntegrationOauthConfig",
                "tags": [
                    "Oauth"
                ],
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.oauth-config",
                "responses": {
                    "200": {
                        "description": "OAuth configuration",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/OauthConfigBasicData"
                                },
                                "examples": {
                                    "slack": {
                                        "summary": "Slack OAuth config",
                                        "value": {
                                            "integration_id": "slack",
                                            "name": "Slack API",
                                            "scopes": "channels:read,chat:write,users:read",
                                            "subject": "ms.integration.oauth.config.slack"
                                        }
                                    },
                                    "xero": {
                                        "summary": "Xero OAuth config",
                                        "value": {
                                            "integration_id": "xero",
                                            "name": "Xero API's",
                                            "scopes": "email,openid,profile,assets,assets.read",
                                            "subject": "ms.integration.oauth.config.xero"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "summary": "Update an OAuth configuration.",
                "description": "[quiva.ai admins only] Update the OAuth configuration for a specific integration - full configuration replacement",
                "operationId": "putIntegrationsOauthConfig",
                "tags": [
                    "Oauth"
                ],
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.put.oauth-config",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/IntegrationOauthConfig"
                            },
                            "examples": {
                                "slack": {
                                    "summary": "Slack OAuth configuration",
                                    "value": {
                                        "integration_id": "slack",
                                        "name": "Slack API",
                                        "scopes": "channels:read,chat:write,users:read,files:read",
                                        "client_id": "123456789.987654321",
                                        "client_secret": "abcdef1234567890abcdef",
                                        "auth_url": "https://slack.com/oauth/v2/authorize",
                                        "token_url": "https://slack.com/api/oauth.v2.access",
                                        "redirect_url": "https://api.quiva.ai/hub/integrations/oauth-callback"
                                    }
                                },
                                "github": {
                                    "summary": "GitHub OAuth configuration",
                                    "value": {
                                        "integration_id": "github",
                                        "name": "GitHub API",
                                        "scopes": "repo,read:user,read:org",
                                        "client_id": "Iv1.a1b2c3d4e5f6g7h8",
                                        "client_secret": "secret123456789abcdef",
                                        "auth_url": "https://github.com/login/oauth/authorize",
                                        "token_url": "https://github.com/login/oauth/access_token",
                                        "redirect_url": "https://api.quiva.ai/hub/integrations/oauth-callback"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OAuth configuration",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "summary": "Delete an OAuth configuration.",
                "description": "[quiva.ai admins only] Deletes an OAuth configuration for a specific integration",
                "operationId": "deleteIntegrationsOauthConfig",
                "tags": [
                    "Oauth"
                ],
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.delete.oauth-config",
                "responses": {
                    "200": {
                        "description": "OAuth configuration",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/integrations/oauth-connections": {
            "get": {
                "summary": "List OAuth connections",
                "description": "Get list of OAuth connections for the authenticated user",
                "operationId": "getIntegrationsOauthConnections",
                "tags": [
                    "Oauth"
                ],
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.oauth-connections",
                "responses": {
                    "200": {
                        "description": "List of OAuth connections",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/OauthConnectionsList"
                                },
                                "example": {
                                    "results": [
                                        {
                                            "access_token": "eyJhbGciOiJSUzI1Ni...",
                                            "token_type": "Bearer",
                                            "refresh_token": "xoxr-123456789012-refresh-token",
                                            "expiry": "2025-06-15T14:30:00.000000+00:00",
                                            "expires_in": 43200,
                                            "sequence": 42,
                                            "subject": "ms.integration.oauth.AC75JGNMJHTRQNXCBDMIAJCJ57HAEWP2RGWXJCIFFGW2K64OKG267A2D.slack.workspace1",
                                            "modified": 1749912600
                                        },
                                        {
                                            "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",
                                            "token_type": "Bearer",
                                            "refresh_token": "ulpL_xero_refresh_token_abc123",
                                            "expiry": "2025-06-15T15:00:00.000000+00:00",
                                            "expires_in": 1800,
                                            "sequence": 85,
                                            "subject": "ms.integration.oauth.AC75JGNMJHTRQNXCBDMIAJCJ57HAEWP2RGWXJCIFFGW2K64OKG267A2D.xero.demo",
                                            "modified": 1749914400
                                        },
                                        {
                                            "access_token": "eyJhbGciOiJSUzI1Ni...",
                                            "token_type": "Bearer",
                                            "expiry": "2025-12-31T23:59:59.000000+00:00",
                                            "expires_in": 31536000,
                                            "sequence": 12,
                                            "subject": "ms.integration.oauth.AC75JGNMJHTRQNXCBDMIAJCJ57HAEWP2RGWXJCIFFGW2K64OKG267A2D.github.personal",
                                            "modified": 1749900000
                                        }
                                    ],
                                    "results_total": 3
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/integrations/{integration_id}/oauth-token/{connection_id}": {
            "parameters": [
                {
                    "$ref": "#/components/parameters/integrationId"
                },
                {
                    "$ref": "#/components/parameters/connectionId"
                }
            ],
            "get": {
                "summary": "Get OAuth connection",
                "description": "Get OAuth connection details for a specific integration and connection",
                "operationId": "getIntegrationsOauthConnection",
                "tags": [
                    "Oauth"
                ],
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.integration-oauth-token",
                "responses": {
                    "200": {
                        "description": "OAuth connection details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/OauthConnection"
                                },
                                "example": {
                                    "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",
                                    "token_type": "Bearer",
                                    "refresh_token": "ulpL_xGHJwk9RmT2PnCq...",
                                    "expiry": "2025-05-29T17:09:39.816102+01:00",
                                    "expires_in": 1800,
                                    "sequence": 85,
                                    "subject": "ms.integration.oauth.AC75JGNMJHTRQNXCBDMIAJCJ57HAEWP2RGWXJCIFFGW2K64OKG267A2D.xero.demo",
                                    "modified": 1748533179
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/integrations/{integration_id}/oauth-connections": {
            "parameters": [
                {
                    "$ref": "#/components/parameters/integrationId"
                }
            ],
            "get": {
                "summary": "Get integration connections",
                "description": "Gets integration connections by integration_id",
                "operationId": "getIntegrationConnections",
                "tags": [
                    "Oauth"
                ],
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.oauth-connection",
                "responses": {
                    "200": {
                        "description": "Connection deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/OauthConnection"
                                },
                                "example": {
                                    "results": [
                                        {
                                            "access_token": "eyJhbGciOiJSUzI1NiIs...",
                                            "token_type": "Bearer",
                                            "refresh_token": "ulpL_...",
                                            "expiry": "2025-05-29T17:09:39.816102+01:00",
                                            "expires_in": 1800,
                                            "sequence": 85,
                                            "subject": "ms.integration.oauth.AC75JGNMJHTRQNXCBDMIAJCJ57HAEWP2RGWXJCIFFGW2K64OKG267A2D.xero.demo",
                                            "modified": 1748533179
                                        },
                                        {
                                            "access_token": "eyJhbGciOiJSUzI1NiIs...",
                                            "token_type": "Bearer",
                                            "refresh_token": "pSn5h...",
                                            "expiry": "2025-05-29T17:11:54.397804+01:00",
                                            "expires_in": 1800,
                                            "sequence": 86,
                                            "subject": "ms.integration.oauth.AC75JGNMJHTRQNXCBDMIAJCJ57HAEWP2RGWXJCIFFGW2K64OKG267A2D.xero.maria",
                                            "modified": 1748533314
                                        }
                                    ],
                                    "results_total": 2
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/integrations/{integration_id}/oauth-connections/{connection_id}": {
            "delete": {
                "summary": "Delete OAuth connection",
                "description": "Delete an OAuth connection for a specific integration",
                "operationId": "deleteIntegrationsOauthConnection",
                "tags": [
                    "Oauth"
                ],
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.delete.oauth-connection",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/integrationId"
                    },
                    {
                        "$ref": "#/components/parameters/connectionId"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Connection deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/integrations/oauth-callback": {
            "get": {
                "summary": "OAuth callback",
                "description": "Handle OAuth callback after user authorization",
                "operationId": "integrationsOauthCallback",
                "tags": [
                    "Oauth"
                ],
                "x-resource-type": "service",
                "x-resource": "microstrate.accounts.get.oauth-callback",
                "parameters": [
                    {
                        "name": "code",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "OAuth authorization code",
                        "example": "4/0AX4XfWgq1P2fJdK8V9L3m..."
                    },
                    {
                        "name": "state",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "OAuth state parameter",
                        "example": "abc123xyz789def456ghi"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OAuth token received and saved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/OauthConnection"
                                },
                                "example": {
                                    "access_token": "eyJhbGciOiJSUzI1Ni...",
                                    "token_type": "Bearer",
                                    "refresh_token": "dGhpcyBpcyBhIHJlZnJlc2ggdG9rZW4...",
                                    "expiry": "2025-06-01T12:00:00.000000+00:00",
                                    "expires_in": 3600,
                                    "sequence": 1,
                                    "subject": "ms.integration.oauth.AC75JGNMJHTRQNXCBDMIAJCJ57HAEWP2RGWXJCIFFGW2K64OKG267A2D.slack.workspace1",
                                    "modified": 1748620800
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/hub/integrations/{integration_id}/oauth-refresh-token/{connection_id}": {
            "get": {
                "summary": "Refresh OAuth token",
                "description": "Refresh an OAuth access token using the refresh token",
                "operationId": "refreshIntegrationsOauthToken",
                "tags": [
                    "Oauth"
                ],
                "x-resource-type": "service",
                "x-resource": "microstrate.hub.get.integration-oauth-refresh",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/integrationId"
                    },
                    {
                        "$ref": "#/components/parameters/connectionId"
                    },
                    {
                        "name": "refresh_token",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "Refresh token",
                        "example": "pSn5h..."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Token refreshed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/OauthConnection"
                                },
                                "example": {
                                    "access_token": "eyJhbGciOiJSUzI1Ni...",
                                    "token_type": "Bearer",
                                    "refresh_token": "bmV3UmVmcmVzaFRva2VuVmFsdWU...",
                                    "expiry": "2025-05-30T18:00:00.000000+01:00",
                                    "expires_in": 1800,
                                    "sequence": 87,
                                    "subject": "ms.integration.oauth.AC75JGNMJHTRQNXCBDMIAJCJ57HAEWP2RGWXJCIFFGW2K64OKG267A2D.xero.maria",
                                    "modified": 1748622000
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "WorkflowResponse": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "subject": {
                        "type": "string",
                        "description": "Workflow subject identifier"
                    },
                    "collection": {
                        "type": "string",
                        "description": "Parent collection subject"
                    },
                    "modified": {
                        "type": "integer",
                        "description": "Unix timestamp of last modification"
                    },
                    "archived": {
                        "type": "boolean"
                    },
                    "config": {
                        "$ref": "#/components/schemas/WorkflowConfig"
                    }
                }
            },
            "PublishResponse": {
                "type": "object",
                "properties": {
                    "success": {
                        "type": "boolean"
                    },
                    "subject": {
                        "type": "string",
                        "description": "Published workflow subject"
                    },
                    "message": {
                        "type": "string"
                    }
                }
            },
            "UpdateGenerateMCPRequest": {
                "type": "object",
                "properties": {
                    "openapi_spec": {
                        "type": "string"
                    },
                    "server_name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    }
                }
            },
            "ListMCPResponse": {
                "properties": {
                    "results": {
                        "items": {
                            "properties": {
                                "created_at": {
                                    "format": "date-time",
                                    "type": "string"
                                },
                                "description": {
                                    "type": "string"
                                },
                                "server_id": {
                                    "type": "string"
                                },
                                "server_name": {
                                    "type": "string"
                                }
                            },
                            "type": "object"
                        },
                        "type": "array"
                    }
                },
                "type": "object"
            },
            "MarketplaceProduct": {
                "properties": {
                    "author": {
                        "type": "string"
                    },
                    "category": {
                        "type": "string"
                    },
                    "cover_image": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "downloads": {
                        "type": "integer"
                    },
                    "featured": {
                        "type": "boolean"
                    },
                    "name": {
                        "type": "string"
                    },
                    "product_id": {
                        "type": "string"
                    },
                    "rating": {
                        "type": "number"
                    },
                    "subcategories": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array"
                    },
                    "type": {
                        "enum": [
                            "flow",
                            "agent",
                            "mcp"
                        ],
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "MarketplaceWorkflowList": {
                "properties": {
                    "page": {
                        "type": "integer"
                    },
                    "page_size": {
                        "type": "integer"
                    },
                    "results": {
                        "items": {
                            "$ref": "#/components/schemas/MarketplaceProduct"
                        },
                        "type": "array"
                    },
                    "results_total": {
                        "type": "integer"
                    }
                },
                "type": "object"
            },
            "RateProductRequest": {
                "properties": {
                    "product_id": {
                        "type": "string"
                    },
                    "rating": {
                        "maximum": 5,
                        "minimum": 1,
                        "type": "integer"
                    }
                },
                "required": [
                    "product_id",
                    "rating"
                ],
                "type": "object"
            },
            "ScheduleFlowRun": {
                "properties": {
                    "description": {
                        "type": "string"
                    },
                    "name": {
                        "description": "Schedule name",
                        "type": "string"
                    },
                    "payload": {
                        "properties": {
                            "subject": {
                                "description": "Workflow subject to execute",
                                "type": "string"
                            },
                            "trigger": {
                                "description": "Trigger data for workflow",
                                "type": "object"
                            }
                        },
                        "required": [
                            "subject",
                            "trigger"
                        ],
                        "type": "object"
                    },
                    "topic": {
                        "description": "Unique schedule topic",
                        "type": "string"
                    },
                    "trigger_every": {
                        "description": "Interval for recurring execution (e.g., '1h', '30m', '1d')",
                        "type": "string"
                    },
                    "trigger_on": {
                        "description": "Specific datetime to trigger (ISO 8601 format)",
                        "format": "date-time",
                        "type": "string"
                    }
                },
                "required": [
                    "name",
                    "topic",
                    "payload"
                ],
                "type": "object"
            },
            "AgentDefinition": {
                "type": "object",
                "required": [
                    "name",
                    "llm_provider",
                    "model"
                ],
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "behaviour": {
                        "type": "string",
                        "description": "System prompt defining agent behavior"
                    },
                    "llm_provider": {
                        "type": "string",
                        "enum": [
                            "openai",
                            "anthropic",
                            "claude",
                            "gemini"
                        ]
                    },
                    "model": {
                        "type": "string",
                        "description": "LLM model identifier"
                    },
                    "timeout": {
                        "type": "integer",
                        "description": "Timeout in milliseconds"
                    },
                    "has_tools": {
                        "type": "boolean",
                        "description": "Whether agent has tools enabled"
                    }
                }
            },
            "WorkflowMarketplaceSubmission": {
                "properties": {
                    "category": {
                        "type": "string"
                    },
                    "cover_image": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "status": {
                        "enum": [
                            "pending",
                            "approved",
                            "rejected"
                        ],
                        "type": "string"
                    },
                    "subcategories": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array"
                    },
                    "topic": {
                        "type": "string"
                    },
                    "workflow_subject": {
                        "type": "string"
                    }
                },
                "required": [
                    "name",
                    "description",
                    "workflow_subject"
                ],
                "type": "object"
            },
            "AgentCancelRequest": {
                "properties": {
                    "cancel_token": {
                        "description": "Token identifying agent(s) to cancel",
                        "type": "string"
                    }
                },
                "required": [
                    "cancel_token"
                ],
                "type": "object"
            },
            "AgentInvokeResponse": {
                "properties": {
                    "metadata": {
                        "type": "object"
                    },
                    "response": {
                        "type": "string"
                    },
                    "session_id": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "AgentNodeInvokeRequest": {
                "properties": {
                    "agent": {
                        "$ref": "#/components/schemas/AgentDefinition",
                        "description": "Inline agent definition"
                    },
                    "cancel_token": {
                        "description": "Token for canceling this agent invocation",
                        "type": "string"
                    },
                    "node_subject": {
                        "description": "Subject of agent node to invoke",
                        "type": "string"
                    },
                    "prompt": {
                        "description": "Prompt for the agent",
                        "type": "string"
                    },
                    "session_id": {
                        "description": "Session identifier",
                        "type": "string"
                    },
                    "visibility": {
                        "description": "Visibility level for the invocation",
                        "enum": [
                            "user",
                            "team",
                            "public"
                        ],
                        "type": "string"
                    }
                },
                "required": [
                    "prompt"
                ],
                "type": "object"
            },
            "CancelResponse": {
                "properties": {
                    "cancelled_count": {
                        "description": "Number of agents cancelled",
                        "type": "integer"
                    },
                    "message": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "DeleteMCPResponse": {
                "properties": {
                    "message": {
                        "type": "string"
                    },
                    "server_id": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "DownloadProductType": {
                "properties": {
                    "collection_subject": {
                        "description": "Target collection to download into",
                        "type": "string"
                    },
                    "product_id": {
                        "description": "Marketplace product identifier",
                        "type": "string"
                    },
                    "secrets": {
                        "description": "Secret mappings for the product",
                        "items": {
                            "properties": {
                                "description": {
                                    "type": "string"
                                },
                                "key": {
                                    "description": "Original secret key in the product",
                                    "type": "string"
                                },
                                "name": {
                                    "type": "string"
                                },
                                "new_key": {
                                    "description": "User's key to map the secret to",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "key",
                                "new_key"
                            ],
                            "type": "object"
                        },
                        "type": "array"
                    }
                },
                "required": [
                    "product_id",
                    "collection_subject"
                ],
                "type": "object"
            },
            "ErrorResponse": {
                "properties": {
                    "error": {
                        "type": "string"
                    },
                    "message": {
                        "type": "string"
                    },
                    "status_code": {
                        "type": "integer"
                    }
                },
                "type": "object"
            },
            "GenerateMCPRequest": {
                "properties": {
                    "description": {
                        "type": "string"
                    },
                    "openapi_spec": {
                        "description": "OpenAPI specification as JSON string",
                        "type": "string"
                    },
                    "server_name": {
                        "description": "Name for the MCP server",
                        "type": "string"
                    }
                },
                "required": [
                    "openapi_spec",
                    "server_name"
                ],
                "type": "object"
            },
            "GenerateMCPResponse": {
                "properties": {
                    "server_id": {
                        "type": "string"
                    },
                    "server_name": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "Error": {
                "type": "object",
                "properties": {
                    "error": {
                        "type": "string"
                    }
                }
            },
            "CreateCollectionRequest": {
                "type": "object",
                "required": [
                    "name",
                    "collection_type"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Name of the collection"
                    },
                    "collection_type": {
                        "type": "string",
                        "enum": [
                            "node",
                            "workflow"
                        ],
                        "description": "Type of the collection (node or workflow)"
                    },
                    "description": {
                        "type": "string",
                        "description": "Optional description of the collection"
                    }
                }
            },
            "CreateCollectionResponse": {
                "type": "object",
                "properties": {
                    "subject": {
                        "type": "string",
                        "description": "Subject identifier for the collection"
                    },
                    "name": {
                        "type": "string",
                        "description": "Name of the collection"
                    },
                    "collection_type": {
                        "type": "string",
                        "description": "Type of the collection (node or workflow)"
                    },
                    "topic": {
                        "type": "string",
                        "description": "Hash of the collection name"
                    },
                    "description": {
                        "type": "string",
                        "description": "Description of the collection"
                    },
                    "modified": {
                        "$ref": "#/components/schemas/Modified"
                    }
                }
            },
            "CreateNodeRequest": {
                "type": "object",
                "required": [
                    "collection",
                    "data"
                ],
                "properties": {
                    "collection": {
                        "type": "string",
                        "description": "Subject of the collection this node belongs to"
                    },
                    "data": {
                        "$ref": "#/components/schemas/NodeData"
                    }
                }
            },
            "CreateNodeResponse": {
                "type": "object",
                "properties": {
                    "subject": {
                        "type": "string",
                        "description": "Subject identifier for the node"
                    },
                    "collection": {
                        "type": "string",
                        "description": "Subject of the collection this node belongs to"
                    },
                    "data": {
                        "type": "object",
                        "description": "Node data"
                    },
                    "type": {
                        "type": "string",
                        "description": "Action type (created)"
                    },
                    "modified": {
                        "$ref": "#/components/schemas/Modified"
                    }
                }
            },
            "NodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "payload"
                ],
                "discriminator": {
                    "propertyName": "node_type",
                    "mapping": {
                        "trigger": "#/components/schemas/TriggerNodeData",
                        "agent": "#/components/schemas/AgentNodeData",
                        "function": "#/components/schemas/FunctionNodeData",
                        "integration": "#/components/schemas/IntegrationNodeData",
                        "flow": "#/components/schemas/FlowNodeData",
                        "eval": "#/components/schemas/EvalNodeData",
                        "condition": "#/components/schemas/ConditionNodeData",
                        "map": "#/components/schemas/MapNodeData",
                        "static": "#/components/schemas/StaticNodeData",
                        "wait": "#/components/schemas/WaitNodeData",
                        "schedule": "#/components/schemas/ScheduleNodeData",
                        "human-in-the-loop": "#/components/schemas/HumanInTheLoopNodeData"
                    }
                },
                "oneOf": [
                    {
                        "$ref": "#/components/schemas/TriggerNodeData"
                    },
                    {
                        "$ref": "#/components/schemas/AgentNodeData"
                    },
                    {
                        "$ref": "#/components/schemas/FunctionNodeData"
                    },
                    {
                        "$ref": "#/components/schemas/IntegrationNodeData"
                    },
                    {
                        "$ref": "#/components/schemas/FlowNodeData"
                    },
                    {
                        "$ref": "#/components/schemas/EvalNodeData"
                    },
                    {
                        "$ref": "#/components/schemas/ConditionNodeData"
                    },
                    {
                        "$ref": "#/components/schemas/MapNodeData"
                    },
                    {
                        "$ref": "#/components/schemas/StaticNodeData"
                    },
                    {
                        "$ref": "#/components/schemas/WaitNodeData"
                    },
                    {
                        "$ref": "#/components/schemas/ScheduleNodeData"
                    },
                    {
                        "$ref": "#/components/schemas/HumanInTheLoopNodeData"
                    }
                ]
            },
            "WorkflowRunOptions": {
                "type": "object",
                "description": "Advanced execution options for workflow runs",
                "properties": {
                    "run_type": {
                        "type": "string",
                        "enum": [
                            "normal",
                            "debounced",
                            "ordered"
                        ],
                        "description": "Execution strategy: 'normal' (immediate), 'debounced' (delayed with deduplication), 'ordered' (sequential by key)"
                    },
                    "order_on": {
                        "type": "string",
                        "description": "JSONPath expression to extract ordering key from trigger (for run_type='ordered')"
                    },
                    "debounce_on": {
                        "type": "string",
                        "description": "JSONPath expression to extract debounce key from trigger (for run_type='debounced')"
                    },
                    "debounce_time": {
                        "type": "integer",
                        "description": "Debounce delay in milliseconds"
                    },
                    "debounce_max": {
                        "type": "integer",
                        "description": "Maximum debounce wait time in milliseconds"
                    }
                }
            },
            "NodeOptions": {
                "type": "object",
                "description": "Node execution options",
                "properties": {
                    "flat_map": {
                        "type": "boolean",
                        "description": "Whether to flatten the response"
                    },
                    "backoff_ms": {
                        "type": "integer",
                        "format": "int64",
                        "description": "Backoff duration in milliseconds - how long to wait before next attempt. Applies to function and flow nodes only."
                    },
                    "timeout": {
                        "type": "integer",
                        "format": "int64",
                        "description": "Timeout duration in milliseconds. Applies to function and flow nodes only."
                    },
                    "attempts": {
                        "type": "integer",
                        "format": "int32",
                        "description": "Number of retry attempts. Applies to function and flow nodes only."
                    },
                    "ignore_response_codes": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "description": "List of HTTP response codes to ignore. Applies to function nodes only."
                    }
                }
            },
            "TriggerNodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "payload"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "Unique node identifier"
                    },
                    "name": {
                        "type": "string",
                        "description": "Human-readable node name"
                    },
                    "description": {
                        "type": "string"
                    },
                    "node_type": {
                        "type": "string",
                        "enum": [
                            "trigger"
                        ]
                    },
                    "trigger_type": {
                        "type": "string",
                        "enum": [
                            "manual",
                            "schedule",
                            "webhook",
                            "embed"
                        ],
                        "description": "Type of trigger mechanism"
                    },
                    "topic": {
                        "type": "string",
                        "description": "Topic identifier for scheduled triggers"
                    },
                    "subject": {
                        "type": "string",
                        "description": "Workflow subject this trigger belongs to"
                    },
                    "payload": {
                        "type": "object",
                        "description": "Trigger configuration varies by trigger_type",
                        "properties": {
                            "api_key": {
                                "type": "object",
                                "description": "API key configuration for embed triggers",
                                "properties": {
                                    "key": {
                                        "type": "string"
                                    },
                                    "creds": {
                                        "type": "string"
                                    },
                                    "created_on": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "expires_on": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "name": {
                                        "type": "string"
                                    }
                                }
                            },
                            "embed_type": {
                                "type": "string",
                                "enum": [
                                    "chat",
                                    "form"
                                ],
                                "description": "Type of embedded widget"
                            },
                            "theme": {
                                "type": "string",
                                "enum": [
                                    "light",
                                    "dark"
                                ]
                            },
                            "element_props": {
                                "type": "object",
                                "properties": {
                                    "title": {
                                        "type": "string"
                                    },
                                    "description": {
                                        "type": "string"
                                    },
                                    "initialMessage": {
                                        "type": "string"
                                    },
                                    "height": {
                                        "type": "string"
                                    }
                                }
                            },
                            "lightTheme": {
                                "type": "object",
                                "description": "Light theme configuration"
                            },
                            "darkTheme": {
                                "type": "object",
                                "description": "Dark theme configuration"
                            },
                            "css": {
                                "type": "string",
                                "description": "Custom CSS for embed"
                            }
                        }
                    }
                }
            },
            "AgentNodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "payload"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "node_type": {
                        "type": "string",
                        "enum": [
                            "agent"
                        ]
                    },
                    "payload": {
                        "type": "object",
                        "required": [
                            "api_key",
                            "llm_provider",
                            "model",
                            "prompt"
                        ],
                        "properties": {
                            "api_key": {
                                "type": "string",
                                "description": "API key for LLM provider"
                            },
                            "llm_provider": {
                                "type": "string",
                                "enum": [
                                    "workforce",
                                    "gemini",
                                    "claude",
                                    "openai"
                                ],
                                "description": "LLM service provider"
                            },
                            "model": {
                                "type": "string",
                                "description": "Model identifier (e.g., claude-3-5-haiku-20241022)"
                            },
                            "behaviour": {
                                "type": "string",
                                "description": "System prompt defining agent behavior"
                            },
                            "prompt": {
                                "description": "Input prompt - supports JSONPath expressions",
                                "oneOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "type": "object"
                                    }
                                ]
                            },
                            "timeout": {
                                "type": "number",
                                "description": "Timeout in seconds or nanoseconds depending on value"
                            },
                            "await": {
                                "type": "boolean",
                                "description": "Wait for agent completion"
                            },
                            "output_schema": {
                                "type": "object",
                                "description": "Expected response structure with field descriptions",
                                "additionalProperties": {
                                    "type": "string"
                                }
                            },
                            "has_tools": {
                                "type": "boolean",
                                "default": false
                            },
                            "knowledge": {
                                "type": "array",
                                "description": "Knowledge sources (kv://, obj://, str://, sid://, dta://)",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "knowledge_config": {
                                "type": "object",
                                "properties": {
                                    "max_results": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "default": 10
                                    },
                                    "min_score": {
                                        "type": "number",
                                        "minimum": 0,
                                        "maximum": 1,
                                        "default": 0
                                    },
                                    "metadata": {
                                        "type": "object",
                                        "additionalProperties": true
                                    }
                                }
                            },
                            "tools": {
                                "type": "array",
                                "description": "Available tools (mcp://, fun://, bit://)",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "tool_definitions": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "required": [
                                        "uri",
                                        "name",
                                        "description",
                                        "schema"
                                    ],
                                    "properties": {
                                        "uri": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "description": {
                                            "type": "string"
                                        },
                                        "schema": {
                                            "type": "object"
                                        }
                                    }
                                }
                            },
                            "context_limit": {
                                "type": "integer",
                                "default": 8000,
                                "description": "Maximum conversation context in tokens"
                            },
                            "message_history_limit": {
                                "type": "integer",
                                "default": 20,
                                "description": "Number of historical messages to retain"
                            },
                            "smart_context": {
                                "type": "boolean",
                                "default": false
                            },
                            "smart_context_config": {
                                "type": "object",
                                "properties": {
                                    "enabled": {
                                        "type": "boolean"
                                    },
                                    "token_limit": {
                                        "type": "integer"
                                    },
                                    "preservation_strategy": {
                                        "type": "string",
                                        "enum": [
                                            "none",
                                            "fixed_window",
                                            "full_thread"
                                        ]
                                    },
                                    "preservation_window_size": {
                                        "type": "integer"
                                    },
                                    "message_type_filter": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "scoring_weights": {
                                        "type": "object",
                                        "properties": {
                                            "keyword": {
                                                "type": "number"
                                            },
                                            "vector": {
                                                "type": "number"
                                            },
                                            "ai": {
                                                "type": "number"
                                            }
                                        }
                                    },
                                    "ai_model": {
                                        "type": "string"
                                    }
                                }
                            },
                            "ai_smart_context": {
                                "type": "boolean",
                                "default": false
                            },
                            "ai_summary_threshold": {
                                "type": "number",
                                "minimum": 0.5,
                                "maximum": 0.95,
                                "default": 0.7
                            },
                            "ai_summary_model": {
                                "type": "string",
                                "default": "claude-3-5-haiku-latest"
                            },
                            "preserve_most_recent": {
                                "type": "integer",
                                "minimum": 2,
                                "maximum": 20,
                                "default": 5
                            },
                            "message_count_threshold": {
                                "type": "integer",
                                "minimum": 10,
                                "default": 50
                            },
                            "summary_agent": {
                                "type": "object",
                                "description": "Agent definition for conversation summarization"
                            },
                            "ai_prompt": {
                                "type": "boolean",
                                "default": false
                            },
                            "instructions": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "context_variables": {
                                "type": "object",
                                "additionalProperties": true,
                                "description": "WARNING: Not sanitized, can enable prompt injection"
                            },
                            "auth": {
                                "type": "object",
                                "additionalProperties": {
                                    "type": "object",
                                    "properties": {
                                        "bearer": {
                                            "type": "string"
                                        },
                                        "api_key": {
                                            "type": "string"
                                        },
                                        "username": {
                                            "type": "string"
                                        },
                                        "password": {
                                            "type": "string"
                                        },
                                        "oauth": {
                                            "type": "string"
                                        }
                                    }
                                }
                            },
                            "llm_config": {
                                "type": "object",
                                "properties": {
                                    "temperature": {
                                        "type": "number",
                                        "minimum": 0,
                                        "maximum": 2
                                    },
                                    "max_tokens": {
                                        "type": "integer",
                                        "minimum": 1
                                    },
                                    "max_turns": {
                                        "type": "integer",
                                        "minimum": 1
                                    }
                                }
                            }
                        }
                    },
                    "options": {
                        "$ref": "#/components/schemas/NodeOptions"
                    }
                }
            },
            "FunctionNodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "subject",
                    "payload"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "node_type": {
                        "type": "string",
                        "enum": [
                            "function"
                        ]
                    },
                    "subject": {
                        "type": "string",
                        "description": "Function subject identifier (required)",
                        "pattern": "^ms\\.compute\\."
                    },
                    "payload": {
                        "description": "Function input parameters - supports JSONPath expressions throughout",
                        "oneOf": [
                            {
                                "type": "object"
                            },
                            {
                                "type": "string"
                            },
                            {
                                "type": "array",
                                "items": {}
                            },
                            {
                                "type": "number"
                            },
                            {
                                "type": "boolean"
                            }
                        ]
                    },
                    "response_map": {
                        "description": "JSONPath mapping to transform function output"
                    },
                    "options": {
                        "$ref": "#/components/schemas/NodeOptions"
                    },
                    "schema": {
                        "type": "object",
                        "properties": {
                            "input": {
                                "type": "object"
                            },
                            "output": {
                                "type": "object"
                            }
                        }
                    }
                }
            },
            "IntegrationNodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "payload"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "node_type": {
                        "type": "string",
                        "enum": [
                            "integration"
                        ]
                    },
                    "integration_id": {
                        "type": "string",
                        "description": "Integration identifier (e.g., 'slack', 'github')"
                    },
                    "request_type_id": {
                        "type": "string",
                        "description": "Specific request type for the integration"
                    },
                    "oauth": {
                        "type": "string",
                        "description": "OAuth connection identifier"
                    },
                    "payload": {
                        "type": "object",
                        "required": [
                            "url",
                            "method"
                        ],
                        "description": "HTTP request configuration - supports JSONPath in all fields",
                        "properties": {
                            "baseURL": {
                                "type": "string",
                                "description": "Base URL for the API"
                            },
                            "url": {
                                "type": "string",
                                "description": "Endpoint path (required)"
                            },
                            "method": {
                                "type": "string",
                                "enum": [
                                    "GET",
                                    "POST",
                                    "PUT",
                                    "DELETE",
                                    "PATCH",
                                    "HEAD",
                                    "OPTIONS",
                                    "get",
                                    "post",
                                    "put",
                                    "delete",
                                    "patch",
                                    "head",
                                    "options"
                                ],
                                "description": "HTTP method (required)"
                            },
                            "data": {
                                "type": "object",
                                "description": "Request body"
                            },
                            "params": {
                                "type": "object",
                                "description": "Path parameters"
                            },
                            "query": {
                                "type": "object",
                                "description": "Query parameters"
                            },
                            "headers": {
                                "type": "object",
                                "additionalProperties": {
                                    "type": "string"
                                },
                                "description": "HTTP headers"
                            },
                            "timeout": {
                                "type": "integer",
                                "description": "Request timeout in milliseconds"
                            },
                            "options": {
                                "type": "object",
                                "description": "Additional request options"
                            }
                        }
                    },
                    "options": {
                        "$ref": "#/components/schemas/NodeOptions"
                    }
                }
            },
            "FlowNodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "subject",
                    "payload"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "node_type": {
                        "type": "string",
                        "enum": [
                            "flow"
                        ]
                    },
                    "subject": {
                        "type": "string",
                        "description": "Sub-workflow subject identifier (required)",
                        "pattern": "^ms\\.hub\\.config\\.workflow\\."
                    },
                    "payload": {
                        "description": "Data passed as trigger to sub-workflow - supports JSONPath",
                        "oneOf": [
                            {
                                "type": "object"
                            },
                            {
                                "type": "string"
                            },
                            {
                                "type": "array",
                                "items": {}
                            }
                        ]
                    },
                    "await": {
                        "type": "boolean",
                        "description": "Wait for sub-workflow completion"
                    },
                    "response_map": {
                        "description": "JSONPath mapping to transform sub-workflow output"
                    },
                    "options": {
                        "$ref": "#/components/schemas/NodeOptions"
                    }
                }
            },
            "EvalNodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "payload"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "node_type": {
                        "type": "string",
                        "enum": [
                            "eval"
                        ]
                    },
                    "payload": {
                        "type": "object",
                        "required": [
                            "code",
                            "params"
                        ],
                        "properties": {
                            "code": {
                                "type": "string",
                                "description": "JavaScript expression or function body (required)"
                            },
                            "params": {
                                "type": "object",
                                "description": "Parameters accessible in code - values support JSONPath (required)",
                                "additionalProperties": true
                            }
                        }
                    },
                    "options": {
                        "$ref": "#/components/schemas/NodeOptions"
                    }
                }
            },
            "ConditionNodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "payload"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "node_type": {
                        "type": "string",
                        "enum": [
                            "condition"
                        ]
                    },
                    "payload": {
                        "description": "Conditional logic defining next nodes - supports JSONPath in conditions"
                    }
                }
            },
            "MapNodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "payload"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "node_type": {
                        "type": "string",
                        "enum": [
                            "map"
                        ]
                    },
                    "payload": {
                        "description": "Data transformation mapping - uses JSONPath throughout",
                        "oneOf": [
                            {
                                "type": "object"
                            },
                            {
                                "type": "array",
                                "items": {}
                            }
                        ]
                    },
                    "options": {
                        "type": "object",
                        "properties": {
                            "flat_map": {
                                "type": "boolean",
                                "description": "Flatten array results"
                            }
                        }
                    }
                }
            },
            "StaticNodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "payload"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "node_type": {
                        "type": "string",
                        "enum": [
                            "static"
                        ]
                    },
                    "payload": {
                        "type": "object",
                        "description": "Static data merged into $.static - literal values only (no JSONPath)",
                        "additionalProperties": true
                    }
                }
            },
            "WaitNodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "payload"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "node_type": {
                        "type": "string",
                        "enum": [
                            "wait"
                        ]
                    },
                    "payload": {
                        "type": "object",
                        "required": [
                            "time_ms"
                        ],
                        "properties": {
                            "time_ms": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "Milliseconds to wait - supports JSONPath"
                            }
                        }
                    }
                }
            },
            "ScheduleNodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "payload"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "node_type": {
                        "type": "string",
                        "enum": [
                            "schedule"
                        ]
                    },
                    "payload": {
                        "type": "object",
                        "required": [
                            "flow_subject",
                            "trigger"
                        ],
                        "properties": {
                            "flow_subject": {
                                "type": "string",
                                "description": "Workflow subject to schedule (required) - supports JSONPath"
                            },
                            "trigger": {
                                "description": "Trigger data for scheduled workflow (required) - supports JSONPath"
                            },
                            "trigger_in": {
                                "type": "string",
                                "description": "Delay before execution (e.g., '5m', '1h', '2d') - supports JSONPath",
                                "pattern": "^\\d+[smhd]$"
                            },
                            "trigger_on": {
                                "type": "string",
                                "description": "Cron expression or ISO date - supports JSONPath"
                            }
                        }
                    }
                }
            },
            "HumanInTheLoopNodeData": {
                "type": "object",
                "required": [
                    "id",
                    "node_type",
                    "payload"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "node_type": {
                        "type": "string",
                        "enum": [
                            "human-in-the-loop"
                        ]
                    },
                    "payload": {
                        "type": "object",
                        "required": [
                            "message"
                        ],
                        "properties": {
                            "message": {
                                "type": "string",
                                "description": "Prompt for human approval/input (required) - supports JSONPath"
                            },
                            "notify": {
                                "$ref": "#/components/schemas/NotificationConfig"
                            }
                        }
                    }
                }
            },
            "NotificationConfig": {
                "type": "object",
                "description": "Notification configuration for human-in-the-loop nodes",
                "properties": {
                    "email": {
                        "type": "object",
                        "required": [
                            "addresses"
                        ],
                        "properties": {
                            "title": {
                                "type": "string",
                                "description": "Email subject - supports JSONPath"
                            },
                            "message": {
                                "type": "string",
                                "description": "Email body (overrides node message) - supports JSONPath"
                            },
                            "addresses": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "format": "email"
                                },
                                "description": "Recipient email addresses (required)"
                            }
                        }
                    },
                    "slack": {
                        "type": "object",
                        "required": [
                            "oauth_connection_id",
                            "channel"
                        ],
                        "properties": {
                            "oauth_connection_id": {
                                "type": "string",
                                "description": "OAuth connection identifier (required)"
                            },
                            "message": {
                                "type": "string",
                                "description": "Slack message (overrides node message) - supports JSONPath"
                            },
                            "channel": {
                                "type": "string",
                                "description": "Slack channel (required, e.g., '#approvals')"
                            }
                        }
                    }
                }
            },
            "Edge": {
                "type": "object",
                "required": [
                    "source",
                    "target"
                ],
                "properties": {
                    "source": {
                        "type": "string",
                        "description": "ID of the source node"
                    },
                    "target": {
                        "type": "string",
                        "description": "ID of the target node"
                    },
                    "id": {
                        "type": "string",
                        "description": "Optional unique identifier for the edge"
                    },
                    "sourceHandle": {
                        "type": "string",
                        "description": "Optional source handle identifier"
                    },
                    "targetHandle": {
                        "type": "string",
                        "description": "Optional target handle identifier"
                    }
                }
            },
            "WorkflowConfig": {
                "type": "object",
                "description": "Complete workflow configuration defining the execution graph",
                "properties": {
                    "nodes": {
                        "type": "array",
                        "description": "Array of node definitions. Each node represents a step in the workflow.",
                        "items": {
                            "$ref": "#/components/schemas/NodeWorkflow"
                        }
                    },
                    "edges": {
                        "type": "array",
                        "description": "Array of edge definitions connecting nodes. Edges define execution flow and dependencies. A graph with no edges will run all nodes simultaneously. Otherwise, nodes will run in a topological order unless condition nodes are defined that might change that order.",
                        "items": {
                            "$ref": "#/components/schemas/Edge"
                        }
                    },
                    "static": {
                        "type": "object",
                        "description": "Static variables accessible throughout workflow execution via $.static path"
                    },
                    "result": {
                        "type": "string",
                        "description": "JSONPath expression defining what to return from workflow execution (e.g., '$.FINAL_NODE.result')"
                    },
                    "options": {
                        "$ref": "#/components/schemas/WorkflowRunOptions"
                    }
                }
            },
            "NodeWorkflow": {
                "type": "object",
                "required": [
                    "id",
                    "data"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "Unique identifier for this node. Cannot be a reserved word (error, success). Used for referencing node output via $.{id} path."
                    },
                    "data": {
                        "$ref": "#/components/schemas/NodeData"
                    },
                    "position": {
                        "type": "object",
                        "description": "Visual position for workflow editor UI",
                        "properties": {
                            "x": {
                                "type": "number"
                            },
                            "y": {
                                "type": "number"
                            }
                        }
                    }
                }
            },
            "CreateWorkflowRequest": {
                "type": "object",
                "required": [
                    "name",
                    "collection"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Unique name for the workflow within the collection. Used to generate the workflow subject/identifier."
                    },
                    "description": {
                        "type": "string",
                        "description": "Human-readable description of what the workflow does. "
                    },
                    "collection": {
                        "type": "string",
                        "description": "Subject of the collection this workflow belongs to (format: ms.hub.config.collection.workflow.{collection_id}). Used to generate the workflow subject/identifier.",
                        "pattern": "^ms\\.hub\\.config\\.collection\\.workflow\\.[0-9]{10}$"
                    },
                    "config": {
                        "$ref": "#/components/schemas/WorkflowConfig"
                    },
                    "secrets": {
                        "type": "array",
                        "description": "List of secret identifiers used by this workflow",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            },
            "CreateWorkflowResponse": {
                "type": "object",
                "properties": {
                    "subject": {
                        "type": "string",
                        "description": "Subject identifier for the workflow"
                    },
                    "name": {
                        "type": "string",
                        "description": "Name of the workflow"
                    },
                    "collection": {
                        "type": "string",
                        "description": "Subject of the collection this workflow belongs to"
                    },
                    "description": {
                        "type": "string",
                        "description": "Description of the workflow"
                    },
                    "config": {
                        "$ref": "#/components/schemas/WorkflowConfig"
                    },
                    "modified": {
                        "$ref": "#/components/schemas/Modified"
                    }
                }
            },
            "RunWorkflowRequest": {
                "type": "object",
                "properties": {
                    "trigger": {
                        "type": "object",
                        "description": "Trigger data for workflow execution (use either trigger or triggers)"
                    },
                    "triggers": {
                        "type": "array",
                        "items": {
                            "type": "object"
                        },
                        "description": "Multiple trigger data sets for parallel workflow execution"
                    },
                    "enable_log": {
                        "type": "boolean",
                        "description": "Whether to enable logging of workflow execution",
                        "default": false
                    },
                    "await": {
                        "type": "boolean",
                        "description": "Whether to wait for workflow completion",
                        "default": false
                    }
                }
            },
            "RunWorkflowResponse": {
                "oneOf": [
                    {
                        "type": "object",
                        "properties": {
                            "trackingId": {
                                "type": "string",
                                "description": "ID for tracking the workflow execution"
                            },
                            "result": {
                                "type": "object",
                                "description": "Result of the workflow execution"
                            }
                        }
                    },
                    {
                        "type": "string",
                        "description": "Status message for debounced or ordered executions"
                    }
                ]
            },
            "PublishWorkflowRequest": {
                "type": "object",
                "required": [
                    "subject"
                ],
                "properties": {
                    "subject": {
                        "type": "string",
                        "description": "Subject of the draft workflow to publish"
                    }
                }
            },
            "UpdateCollectionRequest": {
                "type": "object",
                "required": [],
                "properties": {
                    "subject": {
                        "type": "string",
                        "description": "Subject of the collection to update"
                    },
                    "description": {
                        "type": "string",
                        "description": "Updated description of the collection"
                    }
                }
            },
            "UpdateNodeRequest": {
                "type": "object",
                "required": [
                    "subject",
                    "data"
                ],
                "properties": {
                    "data": {
                        "$ref": "#/components/schemas/NodeData"
                    },
                    "archived": {
                        "type": "boolean",
                        "description": "Whether the node is archived"
                    }
                }
            },
            "UpdateMultiNodeRequest": {
                "type": "array",
                "items": {
                    "$ref": "#/components/schemas/UpdateNodeRequest"
                }
            },
            "UpdateMultiNodeResponse": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "node": {
                            "$ref": "#/components/schemas/UpdateNodeRequest"
                        },
                        "result": {
                            "type": "string",
                            "description": "Result of the update operation"
                        }
                    }
                }
            },
            "UpdateMultiNodeErrorResponse": {
                "type": "object",
                "properties": {
                    "body": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "node": {
                                    "$ref": "#/components/schemas/UpdateNodeRequest"
                                },
                                "result": {
                                    "type": "string",
                                    "description": "Result of the update operation with error messages"
                                }
                            }
                        }
                    },
                    "error": {
                        "type": "string",
                        "description": "General error message"
                    }
                }
            },
            "UpdateWorkflowRequest": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Updated name of the workflow"
                    },
                    "description": {
                        "type": "string",
                        "description": "Updated description of the workflow"
                    },
                    "config": {
                        "$ref": "#/components/schemas/WorkflowConfig"
                    },
                    "archived": {
                        "type": "boolean",
                        "description": "Whether the workflow is archived"
                    }
                }
            },
            "UpdateWorkflowResponse": {
                "type": "object",
                "properties": {
                    "subject": {
                        "type": "string",
                        "description": "Subject identifier for the workflow"
                    },
                    "name": {
                        "type": "string",
                        "description": "Name of the workflow"
                    },
                    "description": {
                        "type": "string",
                        "description": "Description of the workflow"
                    },
                    "config": {
                        "$ref": "#/components/schemas/WorkflowConfig"
                    },
                    "modified": {
                        "$ref": "#/components/schemas/Modified"
                    }
                }
            },
            "GetCollectionResponse": {
                "type": "object",
                "required": [
                    "name",
                    "topic",
                    "subject",
                    "sequence",
                    "type",
                    "modified"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Name of the collection"
                    },
                    "collection_type": {
                        "type": "string",
                        "description": "Type of the collection (node or workflow)"
                    },
                    "topic": {
                        "type": "string",
                        "description": "Hash of the collection name"
                    },
                    "description": {
                        "type": "string",
                        "description": "Description of the collection"
                    },
                    "subject": {
                        "type": "string",
                        "description": "Subject identifier for the collection"
                    },
                    "sequence": {
                        "type": "integer",
                        "description": "The sequence number of the last message for this collection on the stream"
                    },
                    "modified": {
                        "$ref": "#/components/schemas/Modified"
                    },
                    "type": {
                        "type": "string",
                        "description": "Last event type - created or updated",
                        "enum": [
                            "created",
                            "updated"
                        ]
                    }
                }
            },
            "Modified": {
                "type": "integer",
                "description": "Timestamp of last modification"
            },
            "GetNodeResponse": {
                "type": "object",
                "properties": {
                    "subject": {
                        "type": "string",
                        "description": "Subject identifier for the node"
                    },
                    "data": {
                        "$ref": "#/components/schemas/NodeData"
                    },
                    "modified": {
                        "$ref": "#/components/schemas/Modified"
                    }
                }
            },
            "GetWorkflowResponse": {
                "type": "object",
                "properties": {
                    "subject": {
                        "type": "string",
                        "description": "Subject identifier for the workflow"
                    },
                    "name": {
                        "type": "string",
                        "description": "Name of the workflow"
                    },
                    "description": {
                        "type": "string",
                        "description": "Description of the workflow"
                    },
                    "config": {
                        "$ref": "#/components/schemas/WorkflowConfig"
                    },
                    "modified": {
                        "$ref": "#/components/schemas/Modified"
                    }
                }
            },
            "ListNodesResponse": {
                "type": "object",
                "properties": {
                    "results": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "subject": {
                                    "type": "string",
                                    "description": "Subject identifier for the node"
                                },
                                "data": {
                                    "$ref": "#/components/schemas/NodeData"
                                },
                                "modified": {
                                    "$ref": "#/components/schemas/Modified"
                                }
                            }
                        }
                    },
                    "results_total": {
                        "type": "integer",
                        "description": "Total number of results"
                    }
                }
            },
            "ListWorkflowsResponse": {
                "type": "object",
                "properties": {
                    "results": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "subject": {
                                    "type": "string",
                                    "description": "Subject identifier for the workflow"
                                },
                                "name": {
                                    "type": "string",
                                    "description": "Name of the workflow"
                                },
                                "description": {
                                    "type": "string",
                                    "description": "Description of the workflow"
                                },
                                "config": {
                                    "$ref": "#/components/schemas/WorkflowConfig"
                                },
                                "modified": {
                                    "$ref": "#/components/schemas/Modified"
                                }
                            }
                        }
                    },
                    "results_total": {
                        "type": "integer",
                        "description": "Total number of results"
                    }
                }
            },
            "SuccessResponse": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string",
                        "description": "Success message"
                    }
                }
            },
            "ErrorResponse": {
                "type": "object",
                "properties": {
                    "error": {
                        "type": "string",
                        "description": "Error message"
                    }
                }
            },
            "IntegrationOauthConfig": {
                "type": "object",
                "required": [
                    "integration_id",
                    "name",
                    "scopes",
                    "client_id",
                    "client_secret",
                    "auth_url",
                    "token_url",
                    "redirect_url"
                ],
                "properties": {
                    "integration_id": {
                        "type": "string",
                        "description": "Unique identifier for the integration"
                    },
                    "name": {
                        "type": "string",
                        "description": "Name of the OAuth integration"
                    },
                    "scopes": {
                        "type": "string",
                        "description": "Comma-separated list of OAuth scopes",
                        "example": "read,write,admin"
                    },
                    "client_id": {
                        "type": "string",
                        "description": "OAuth client ID"
                    },
                    "client_secret": {
                        "type": "string",
                        "description": "OAuth client secret"
                    },
                    "auth_url": {
                        "type": "string",
                        "format": "uri",
                        "description": "Authorization URL for the OAuth flow"
                    },
                    "token_url": {
                        "type": "string",
                        "format": "uri",
                        "description": "Token URL to exchange authorization code for access token"
                    },
                    "redirect_url": {
                        "type": "string",
                        "format": "uri",
                        "description": "Redirect URL used in the OAuth flow"
                    }
                }
            },
            "OauthConfigBasicData": {
                "type": "object",
                "properties": {
                    "integration_id": {
                        "type": "string",
                        "example": "slack"
                    },
                    "name": {
                        "type": "string",
                        "example": "Slack API"
                    },
                    "scopes": {
                        "type": "string",
                        "example": "channels:read"
                    },
                    "subject": {
                        "type": "string",
                        "example": "ms.integration.oauth.config.slack"
                    }
                },
                "example": {
                    "integration_id": "slack",
                    "name": "Slack API",
                    "scopes": "channels:read",
                    "subject": "ms.integration.oauth.config.slack"
                }
            },
            "OauthConfigList": {
                "type": "object",
                "properties": {
                    "results": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/OauthConfigBasicData"
                        }
                    },
                    "results_total": {
                        "type": "integer",
                        "example": 2
                    }
                },
                "example": {
                    "results": [
                        {
                            "integration_id": "slack",
                            "name": "Slack API",
                            "scopes": "channels:read",
                            "subject": "ms.integration.oauth.config.slack"
                        },
                        {
                            "integration_id": "xero",
                            "name": "Xero API's",
                            "scopes": "email,openid,profile,assets,assets.read,files,files.read,projects,projects.read",
                            "subject": "ms.integration.oauth.config.xero"
                        }
                    ],
                    "results_total": 2
                }
            },
            "OauthConnection": {
                "type": "object",
                "properties": {
                    "access_token": {
                        "type": "string",
                        "description": "OAuth access token",
                        "example": "eyJhbGciOiJSUzI1Ni..."
                    },
                    "token_type": {
                        "type": "string",
                        "description": "Token type (usually Bearer)",
                        "example": "Bearer"
                    },
                    "refresh_token": {
                        "type": "string",
                        "description": "OAuth refresh token",
                        "example": "ulpL_..."
                    },
                    "expiry": {
                        "type": "string",
                        "format": "date-time",
                        "description": "Token expiration time",
                        "example": "2025-05-29T17:09:39.816102+01:00"
                    },
                    "expires_in": {
                        "type": "integer",
                        "description": "Token expires in seconds",
                        "example": 1800
                    },
                    "sequence": {
                        "type": "integer",
                        "description": "Message sequence number",
                        "example": 85
                    },
                    "subject": {
                        "type": "string",
                        "description": "Message subject",
                        "example": "ms.integration.oauth.AC75JGNMJHTRQNXCBDMIAJCJ57HAEWP2RGWXJCIFFGW2K64OKG267A2D.xero.demo"
                    },
                    "modified": {
                        "type": "integer",
                        "description": "Last modified timestamp",
                        "example": 1748533179
                    }
                },
                "example": {
                    "access_token": "eyJhbGciOiJSUzI1Ni...",
                    "expires_in": 1800,
                    "expiry": "2025-05-29T17:09:39.816102+01:00",
                    "modified": 1748533179,
                    "refresh_token": "ulpL_...",
                    "sequence": 85,
                    "subject": "ms.integration.oauth.AC75JGNMJHTRQNXCBDMIAJCJ57HAEWP2RGWXJCIFFGW2K64OKG267A2D.xero.demo",
                    "token_type": "Bearer"
                }
            },
            "OauthConnectionsList": {
                "type": "object",
                "properties": {
                    "results": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/OauthConnection"
                        }
                    },
                    "results_total": {
                        "type": "integer",
                        "example": 2
                    }
                },
                "example": {
                    "results": [
                        {
                            "access_token": "eyJhbGciOiJSUzI1Ni...",
                            "expires_in": 1800,
                            "expiry": "2025-05-29T17:09:39.816102+01:00",
                            "modified": 1748533179,
                            "refresh_token": "ulpL_...",
                            "sequence": 85,
                            "subject": "ms.integration.oauth.AC75JGNMJHTRQNXCBDMIAJCJ57HAEWP2RGWXJCIFFGW2K64OKG267A2D.xero.demo",
                            "token_type": "Bearer"
                        },
                        {
                            "access_token": "eyJhbGciOiJSUzI1NiIs...",
                            "expires_in": 1800,
                            "expiry": "2025-05-29T17:11:54.397804+01:00",
                            "modified": 1748533314,
                            "refresh_token": "pSn5h...",
                            "sequence": 86,
                            "subject": "ms.integration.oauth.AC75JGNMJHTRQNXCBDMIAJCJ57HAEWP2RGWXJCIFFGW2K64OKG267A2D.xero.maria",
                            "token_type": "Bearer"
                        }
                    ],
                    "results_total": 2
                }
            },
            "OauthLoginResponse": {
                "type": "object",
                "properties": {
                    "oauth_url": {
                        "type": "string",
                        "description": "OAuth authorization URL to redirect user to",
                        "example": "https://slack.com/oauth/v2/authorize?client_id=123456789.987654321&scope=channels:read&state=abc123xyz&redirect_uri=https://api.example.com/hub/integrations/oauth-callback"
                    }
                },
                "example": {
                    "oauth_url": "https://slack.com/oauth/v2/authorize?client_id=123456789.987654321&scope=channels:read&state=abc123xyz&redirect_uri=https://api.example.com/hub/integrations/oauth-callback"
                }
            }
        },
        "parameters": {
            "queryCollectionTopic": {
                "name": "collection_topic",
                "in": "query",
                "schema": {
                    "type": "string"
                },
                "description": "Filter list by collection topic"
            },
            "collectionTopic": {
                "name": "collection_topic",
                "in": "path",
                "description": "The topic is a hash of the name that was used when a collection was created",
                "required": true,
                "schema": {
                    "type": "string"
                },
                "example": "1234567890"
            },
            "nodeTopic": {
                "name": "node_topic",
                "in": "path",
                "description": "Node topic - hash of the names the node was created with",
                "required": true,
                "schema": {
                    "type": "string"
                },
                "example": "98765432"
            },
            "flowTopic": {
                "name": "flow_topic",
                "in": "path",
                "description": "Flow topic - hash of the names the node was created with",
                "required": true,
                "schema": {
                    "type": "string"
                },
                "example": "21312322"
            },
            "collectionType": {
                "name": "collection_type",
                "in": "path",
                "required": true,
                "description": "List only 'node' or only 'workflow' collections. If this parameter is omitted, both will be listed",
                "schema": {
                    "type": "string",
                    "enum": [
                        "node",
                        "workflow"
                    ]
                },
                "example": "node"
            },
            "integrationId": {
                "name": "integration_id",
                "in": "path",
                "required": true,
                "schema": {
                    "type": "string"
                },
                "description": "Integration identifier",
                "example": "slack"
            },
            "connectionId": {
                "name": "connection_id",
                "in": "path",
                "required": true,
                "schema": {
                    "type": "string"
                },
                "description": "Connection identifier",
                "example": "maria"
            },
            "queryCollectionType": {
                "name": "collection_type",
                "in": "query",
                "description": "List only 'node' or only 'workflow' collections. If this parameter is omitted, both will be listed",
                "schema": {
                    "type": "string",
                    "enum": [
                        "node",
                        "workflow"
                    ]
                },
                "example": "node"
            },
            "queryDraftFlag": {
                "name": "draft",
                "in": "query",
                "description": "Draft flag",
                "required": false,
                "schema": {
                    "type": "boolean"
                },
                "example": true
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT",
                "description": "JWT Authorization header using the Bearer scheme"
            },
            "apiKeyAuth": {
                "type": "apiKey",
                "in": "header",
                "name": "X-Api-Key"
            }
        },
        "responses": {
            "BadRequest": {
                "description": "Invalid request parameters or validation failure",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/Error"
                        },
                        "examples": {
                            "validationError": {
                                "summary": "Validation error",
                                "value": {
                                    "error": "duplicate node id found: CODE_EXPERT"
                                }
                            },
                            "missingField": {
                                "summary": "Missing required field",
                                "value": {
                                    "error": "a name is required"
                                }
                            },
                            "invalidSubject": {
                                "summary": "Invalid subject format",
                                "value": {
                                    "error": "invalid collection subject"
                                }
                            }
                        }
                    }
                }
            },
            "Unauthorized": {
                "description": "Authentication required or token invalid",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/Error"
                        },
                        "example": {
                            "error": "unauthorized"
                        }
                    }
                }
            }
        }
    },
    "security": [
        {
            "bearerAuth": []
        },
        {
            "apiKeyAuth": []
        }
    ],
    "tags": [
        {
            "name": "Collections",
            "description": "Operations related to collections"
        },
        {
            "name": "Nodes",
            "description": "Operations related to nodes"
        },
        {
            "name": "Workflows",
            "description": "Operations related to workflows"
        },
        {
            "name": "Oauth",
            "description": "Oauth configurations and connections"
        },
        {
            "name": "Marketplace",
            "description": "Marketplace listings & actions"
        }
    ]
}